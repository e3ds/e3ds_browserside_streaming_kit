(()=>{let e;var t=void 0,n="connector.eagle3dstreaming.com",o=void 0,a=void 0;let s;if("undefined"!=typeof e3ds_data&&(null!=e3ds_data.domain?n=e3ds_data.domain:console.warn("e3ds_data.domain absent so setting to default one"),null!=e3ds_data.userName?t=e3ds_data.userName:console.error("e3ds_data.userName missing"),null!=e3ds_data.appName?o=e3ds_data.appName:console.error("e3ds_data.appName missing"),null!=e3ds_data.configurationName?a=e3ds_data.configurationName:console.error("e3ds_data.configurationName missing")),s={isAdminDebugging:"0",useExtendedTyping:"0",TurnServer:"0",showbrowserMouse:"1",ShouldAutoPlay:"0",fakeMouseWithTouches:"0",showPsControl:"0",useVOIP:"0",MouseControlScheme:"1",expireOn:"15minutes",exeLunchArgs:"-ResX=1280  -ResY=720",systemVersion:""},void 0===l)var l=void 0;if(null!=l&&(s=l),void 0===r)var r=window.location.search;if(console.log("search: "+r),void 0===c){var c=new URLSearchParams(window.location.search);console.log("urlParams: ")}for(var[d,u]of c.entries()){console.log(d,u);var g=c.get("app"),m=c.get("owner"),p=c.get("configuration");null!=g&&(o=g),null!=m&&(t=m),null!=p&&(a=p)}var f="https://"+n,y="/v5/"+t+"/"+o+"/"+a;let h=y;console.log("pathname: "+h);let v=f+y;function w(e,t){0!=G("enableRuntimeNotifications")&&e3ds_alert(e,t)}function S(e,t,n=1e3){null!=t?1===t.readyState?t.send(e):setTimeout((function(){S(e,t,n)}),1e3):console.error("ahsanWsSend--\x3ews2WorkWIth undefined  ")}v+=r,console.log("href_emulated1: "+v),console.log("pathname1: "+h),console.log("href_emulated: "+v),console.log("pathname: "+h);var b=new Array,E=!1,B=!0,T=!0,I=void 0,k=void 0,C=console,x=console.log,M=console.warn;let D={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol Error",1003:"Unsupported Data",1004:"(For future)",1005:"No Status Received",1006:"Abnormal Closure",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message too big",1010:"Missing Extension",1011:"Internal Error",1012:"Service Restart",1013:"Try Again Later",1014:"Bad Gateway",1015:"TLS Handshake"};function P(e){W=e}function O(e){var n=v;Jn.elInfo&&(n=n+" : ----\x3e"+Jn.elInfo.instanceId_exeLuncher+" : "+Jn.elInfo.computerName),ee&&(n=n+" : ----\x3e"+JSON.stringify(ee)),ke&&(n=n+" : ----\x3e"+JSON.stringify(ke)),A(n=(n=n+" : ----\x3eappname: "+H+" , owner: "+t+" , "+JSON.stringify(k)+" : ----\x3e")+" : "+e)}function A(e){1==G("isAdminDebugging")&&console.log("postToTelegram(): "+e),fetch("https://notifications.eagle3dstreaming.com/message_sent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input_chat_id:-572005528,message:e})}).then((e=>{1==G("isAdminDebugging")&&console.log(e)})).catch((e=>{console.error(e)}))}function R(e){0==e?(console=console||{},console.log=function(){},console.warn=function(){}):1==e&&(console=C,console.log=x,console.warn=M)}var L=(Xe=h.split("/"))[1];console.log("urlVersion:"+L);for(const[e,t]of c)"args"!==e&&"launcher"!==e||c.set("exeLunchArgs",t),console.log(e,t);var N="assets/images/UE4_Logo.png",F="assets/images/background.jpg";F=void 0;var U=void 0,_=void 0,W=void 0,H=void 0,J=void 0,q=!1,V=0,X=!1,z=void 0;function G(e){if(null!=s){if(""==s[e]||"undefined"==s[e])return;return s[e]}return c.get(e)}var j=0,Q=!1,Y=1,K=window.location.hostname.split("."),Z=K[1]+"."+K[2],ee=void 0,te="assets/images/background.jpg";te=void 0;var ne=!0,oe="",ie="",ae=!1,se=!1,le=void 0,re=!1,ce=void 0,de=void 0,ue=0,ge=!1,me=1,pe=0,fe=0,ye=9e5,he=0;function ve(){1==Y?(console.log(" 1111111111111 showbrowserMouse === 1 > "),console.log(" 1111111111111 extractValueFromUrl(showbrowserMouse):"+G("showbrowserMouse")),ie="default",oe="cursor: default"):(ie="none",oe=""),console.log(" 1111111111111 styleCursor > "+ie),console.log(" 1111111111111 styleAdditional > "+oe),an()}let we;var Se,be,Ee,Be,Te,Ie,ke,Ce,xe=null,Me=(new Date).getTime(),De=new Map,Pe=!1,Oe=null,Ae=!0;se=!1,ae=!1;let Re=!1,Le=0;var Ne=void 0,Fe=void 0,Ue=void 0;function _e(){return!(window.location===window.parent.location||window.self===window.top)}if(R(1),"v5"==L)if("spectator"==Xe[2])q=!0,X=!0,V=2,Wt(Jn={domain:"ms6.eaglepixelstreaming.com",httpsPort:8084});else{P(Xe[2]),H=Xe[3],J=Xe[4];for(const[e,t]of c){if("hostMeetingId"==e){U=t;break}if("GuestMeetingId"==e){_=t,J=Xe[3],H=void 0;break}}}else if("v4"==L)if(null==Xe[2])console.log("wrong url. missing parts of it");else{var We=Xe[2];console.log("/:configurationStr:"+We);var He=atob(We);console.log("/:configuration decryptedString:"+He);try{s=JSON.parse(He),s.systemVersion=4,P(s.owner),H=s.appName}catch(e){console.log("wrong url"),e instanceof SyntaxError?(console.error(e.name),console.log(e)):(console.error(e.message),console.log(e))}}else if("v6"==L)if(null==Xe[2])console.log("wrong url. missing parts of it");else{var Je=Xe[2];1==G("isAdminDebugging")&&console.log("/:jsonStr:"+Je),He=atob(Je),1==G("isAdminDebugging")&&console.log("/:configuration decryptedString:"+He);try{decryptedJson=JSON.parse(He),s.systemVersion=6,P(decryptedJson.owner),H=decryptedJson.appName,J=decryptedJson.ConfigName}catch(e){console.log("wrong url"),e instanceof SyntaxError?(console.error(e.name),console.log(e)):(console.error(e.message),console.log(e))}}else{var qe=Xe[1];if(null!=qe){for(var[d,u]of(P(qe),console.log("old url detected for serverOwner: "+W),te="assets/images/083057_BGI/"+W+"/"+G("appName")+"/1.png",c.entries()))console.log("1111---------------------------urlParams value for  "+d+" :"+u),s[d]=u;s.owner=W,U=s.hostMeetingId;var Ve=JSON.stringify(s);console.log(Ve);var $e=btoa(Ve),Xe=window.location.protocol+"//"+window.location.hostname+"/v4/"+$e;console.log(Xe),F="assets/images/083057_BGI/"+G("owner")+"/"+G("appName")+"/1.png",N="assets/images/083057_logo/"+G("owner")+"/"+G("appName")+"/1.png",console.log("configurationObj for old url: "+JSON.stringify(s,null,"\t"))}else console.error("url detected without any serverOwner info")}function ze(e){window.top.postMessage(e,"*")}var Ge=void 0,je=void 0;function Qe(){je.value="",je.style.display="none",je.blur()}function Ye(e){console.log(e),"Enter"==e.key&&(console.log("11111111111111 submit"),Ge.classList.add("hiddenState"),zt({CMD:"TextCommitedForWidget",value:je.value}),Qe())}function Ke(){je.style.width=2+je.value.length+"ch",console.log("onchangehiddenInputText : "+je.style.width)}function Ze(e){return e>=112&&e<=123||9===e}function Ze(e){return e>=112&&e<=123||9===e}new Map,setInterval((function(){je&&console.log("1111  hiddenInput.style.display : "+je.style.display)}),1e3);function et(e){return 16===e.keyCode&&"ShiftRight"===e.code?253:17===e.keyCode&&"ControlRight"===e.code?254:18===e.keyCode&&"AltRight"===e.code?255:e.keyCode}function tt(){var e=document.getElementById("streamingVideo");if(e){var t=document.getElementById("AudioBtnImg");t&&(t.src=e.muted?"assets/images/mute.svg":"assets/images/unmute.svg",console.log(t.src))}}function nt(){!function(e){var t=document.getElementById("streamingVideo");if(t.muted=e,console.log("streamingVideo.muted: "+t.muted),ce||(ce=document.getElementById("Audio")),ce&&(ce.muted=e,console.log("audioElem2.muted: "+ce.muted)),!e&&(ce||(ce=document.createElement("Audio")),ce)){ce.autoplay=!0,null!=de&&(ce.srcObject=de);var n=ce.play();void 0!==n&&n.then((()=>{console.log("switchAudioTo() Created new audio element to play seperate audio stream.")})).catch((e=>{console.warn("Autoplay  audio was prevented.deleting audioElem "),delete ce}))}console.log("11111111111111 streamingVideo.muted ="+t.muted),tt()}(!document.getElementById("streamingVideo").muted)}function ot(){if(ge){var e=document.getElementById("streamingVideo");e&&e.muted&&(ge=!1,nt())}}function it(){clearTimeout(we),we=setTimeout((function(){if(Re||kn)return it(),void console.log("startExpireOnCountDown--\x3e isAppPreparationprocessGoingOn: "+Re);B=!1,T=!1,ws4queue_shouldTryToReconnect=!1,Bn&&Bn.close(),Se&&Se.close(),_e()?Rn("Session expired,please refresh the page "):Rn("Session expired,to start a new session please visit: "+location.href)}),ye)}function at(){ot(),window.removeEventListener("touchstart",at),window.removeEventListener("mousedown",at)}function st(){if(lt){if(se)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),se=!1;else{let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),screen.orientation.lock("landscape"),se=!0}clearInterval(Te),clearTimeout(Ie),lt=!1}}document.addEventListener("keypress",(function(e){ot();const t=e.which||e.code;let n=e.key;n||(n=String.fromCharCode(t))})),Date.now(),window.addEventListener("touchstart",at),window.addEventListener("mousedown",at);var lt=!1;Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)};var rt=void 0,ct=void 0;X=!0,tgsfsgsg=c.get("isAdminDebugging"),null!=tgsfsgsg&&(X=tgsfsgsg),C=console,x=console.log;var dt=console.info;function ut(e){e=e||{};var t=this;this.cfg=e.peerConnectionOptions||{},this.cfg.sdpSemantics="unified-plan",this.cfg.offerExtmapAllowMixed=!1,this.pcClient=null,this.dcClient=null,this.tnClient=null,this.sdpConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1},this.dataChannelOptions={ordered:!0},this.latencyTestTimings={TestStartTimeMs:null,UEReceiptTimeMs:null,UEPreCaptureTimeMs:null,UEPostCaptureTimeMs:null,UEPreEncodeTimeMs:null,UEPostEncodeTimeMs:null,UETransmissionTimeMs:null,BrowserReceiptTimeMs:null,FrameDisplayDeltaTimeMs:null,Reset:function(){this.TestStartTimeMs=null,this.UEReceiptTimeMs=null,this.UEPreCaptureTimeMs=null,this.UEPostCaptureTimeMs=null,this.UEPreEncodeTimeMs=null,this.UEPostEncodeTimeMs=null,this.UETransmissionTimeMs=null,this.BrowserReceiptTimeMs=null,this.FrameDisplayDeltaTimeMs=null},SetUETimings:function(e){this.UEReceiptTimeMs=e.ReceiptTimeMs,this.UEPreCaptureTimeMs=e.PreCaptureTimeMs,this.UEPostCaptureTimeMs=e.PostCaptureTimeMs,this.UEPreEncodeTimeMs=e.PreEncodeTimeMs,this.UEPostEncodeTimeMs=e.PostEncodeTimeMs,this.UETransmissionTimeMs=e.TransmissionTimeMs,this.BrowserReceiptTimeMs=Date.now(),this.OnAllLatencyTimingsReady(this)},SetFrameDisplayDeltaTime:function(e){null==this.FrameDisplayDeltaTimeMs&&(this.FrameDisplayDeltaTimeMs=Math.round(e),this.OnAllLatencyTimingsReady(this))},OnAllLatencyTimingsReady:function(e){}},createWebRtcVideo=function(){var e=document.getElementById("streamingVideo");if(e||((e=document.createElement("video")).id="streamingVideo"),setInterval((function(){e.readyState}),1e3),1==me&&(b.length>0||(e.autoplay=!0,e.muted=!0),e.disablepictureinpicture=!0,tt()),e.addEventListener("loadstart",(function(){})),e.addEventListener("durationchange",(function(e){}),!0),e.addEventListener("loadeddata",(function(e){console.log("loadeddata video() e.target.duration:",e.target.duration)}),!0),e.addEventListener("seeking",(e=>{console.log("Video is seeking a new position.")})),e.addEventListener("seeked",(e=>{console.log("Video found the playback position it was looking for.")})),e.addEventListener("playing",(e=>{console.log("Video is no longer paused")})),e.addEventListener("waiting",(e=>{console.log("Video is waiting for more data.")})),e.addEventListener("ended",(e=>{console.log("Video stopped either because 1) it was over, or 2) no further data is available.")})),e.addEventListener("volumechange",(e=>{console.log("The volume changed.")})),e.addEventListener("emptied",(e=>{console.log("Uh oh. The media is empty. Did you call load()?")})),e.addEventListener("stalled",(e=>{console.log("Failed to fetch data, but trying.")})),e.addEventListener("progress",(function(e){}),!0),e.addEventListener("canplay",(function(e){}),!0),e.addEventListener("canplaythrough",(function(e){}),!0),e.addEventListener("loadedmetadata",(function(e){console.log("loadedmetadata video():",new Date);var n=new Date-rt;Math.round(n/6e4),console.log("Time cost :",n/6e4),clearInterval(ct),t.onVideoInitialised&&t.onVideoInitialised()}),!0),"requestVideoFrameCallback"in HTMLVideoElement.prototype){const n=(o,i)=>{if(i.receiveTime&&i.expectedDisplayTime){const e=i.presentationTime-i.receiveTime;t.aggregatedStats||(t.aggregatedStats={}),t.aggregatedStats.receiveToCompositeMs=e}e.requestVideoFrameCallback(n)};e.requestVideoFrameCallback(n)}return e},this.video=createWebRtcVideo(),onsignalingstatechange=function(e){console.log("signaling state change:",e)},oniceconnectionstatechange=function(e){console.log("ice connection state change:",e.target.iceConnectionState,"  -> ",new Date),"disconnected"==e.target.iceConnectionState?console.warn("ice server diconnected"):"connected"==e.target.iceConnectionState&&(rt=new Date,console.log("lastCalculatedTime: "+rt),ct=setInterval((function(){e3ds_alert("High load.Might take upto 3 min. dont close tab ",{timeout:15e3,color:"Blue"})}),15e3))},onicegatheringstatechange=function(e){console.log("ice gathering state change:",e),_t(5)},handleOnTrack=function(e){if(console.log("handleOnTrack",e.streams),e.track&&console.log("Got track - "+e.track.kind+" id="+e.track.id+" readyState="+e.track.readyState),"audio"!=e.track.kind)return"video"==e.track.kind&&(t.video.srcObject,e.streams[0]),_t(5),t.video.srcObject=e.streams[0],void console.log("Set video source from video track ontrack.");I=e.streams[0]},this.handleOnAudioTrack=function(e){if(console.log("handleOnAudioTrack()111:",new Date),t.video.srcObject!=e&&t.video.srcObject&&t.video.srcObject!==e){(ce=document.createElement("Audio")).autoplay=!0,ce.srcObject=e,de=e;var n=ce.play();ce.addEventListener("loadedmetadata",(function(e){}),!0),ce.addEventListener("loadstart",(function(){})),ce.addEventListener("durationchange",(function(e){}),!0),ce.addEventListener("loadeddata",(function(e){}),!0),ce.addEventListener("progress",(function(e){}),!0),ce.addEventListener("canplay",(function(e){}),!0),ce.addEventListener("canplaythrough",(function(e){}),!0),void 0!==n&&n.then((()=>{console.log("audioElem.play()  Created new audio element to play seperate audio stream.")})).catch((e=>{console.warn("Autoplay  audio was prevented.deleting audioElem "),delete ce}))}},setupDataChannel=function(e,n,o){try{let i=e.createDataChannel(n,o);return console.log(`Created datachannel (${n})`),i.binaryType="arraybuffer",i.onopen=function(e){console.log(`data channel (${n}) connect`),_t(5),t.onDataChannelConnected&&t.onDataChannelConnected(),"function"==typeof onDataChannelOpen?onDataChannelOpen():console.log("not found onDataChannelOpen")},i.onclose=function(e){console.log(`data channel (${n}) closed`),t.onDataChannelClosed&&t.onDataChannelClosed(),"function"==typeof onDataChannelClose?onDataChannelClose():console.log("not found onDataChannelClose")},i.onmessage=function(e){t.onDataChannelMessage&&t.onDataChannelMessage(e.data)},i}catch(e){return console.warn("No data channel",e),null}},onicecandidate=function(e){console.log("----- onicecandidate() ICE candidate: ",e),e.candidate?(e.candidate.candidate&&t.onWebRtcCandidate(e.candidate),console.warn("onicecandidate()---\x3e e.candidate.type",e.candidate.type),e.candidate.type,"srflx"==e.candidate.type&&(console.warn("The STUN server is reachable!"),console.log(`   Your Public IP Address is: ${e.candidate.address}`)),"relay"==e.candidate.type&&console.warn("The TURN server is reachable !")):console.warn("onicecandidate()---\x3e ICE candidate undefined",new Date)},handleCreateOffer=function(e){e.createOffer(t.sdpConstraints).then((function(n){"stereo"==G("audioType")&&(n.sdp=n.sdp.replace("useinbandfec=1","useinbandfec=1; minptime=10; stereo=1;")),console.warn("111 pc.setLocalDescription(offer)",new Date),e.setLocalDescription(n),console.warn("222 pc.setLocalDescription(offer)",new Date),t.onWebRtcOffer&&(n.sdp=n.sdp.replace(/(a=fmtp:\d+ .*level-asymmetry-allowed=.*)\r\n/gm,"$1;x-google-start-bitrate=10000;x-google-max-bitrate=20000\r\n"),n.sdp=n.sdp.replace(/sendrecv/gm,"recvonly"),n.sdp=n.sdp.replace("useinbandfec=1","useinbandfec=1;maxaveragebitrate="+G("audioMaxAverageBitrate")),n.sdp=n.sdp.replace("a=extmap-allow-mixed","a=msid-semantic: WMS"),console.log("------offer.sdp: "+n.sdp),t.onWebRtcOffer(n))}),(function(){console.warn("Couldn't create offer")}))},handleCreateAnswer111=function(e){e.createAnswer().then((function(n){e.setLocalDescription(n).then((function(){t.onWebRtcAnswer&&(console.log("answer %o",n.sdp),t.onWebRtcAnswer(n))}))}),(function(){console.warn("Couldn't create offer")}))},setupPeerConnection=function(e){e.SetBitrate&&console.log("Hurray! there's RTCPeerConnection.SetBitrate function"),e.onsignalingstatechange=onsignalingstatechange,e.oniceconnectionstatechange=oniceconnectionstatechange,e.onicegatheringstatechange=onicegatheringstatechange,e.ontrack=handleOnTrack,e.onicecandidate=onicecandidate,e.onnegotiationneeded=function(){console.warn("Negotiation Needed")},e.onicecandidateerror=function(e){console.warn("onicecandidateerror(): "+e.errorCode),701==e.errorCode&&console.warn("Error 701 indicates that none of the ICE candidates were able to successfully make contact with the STUN or TURN server. The 701 error is fired only once per server URL from the list of available STUN or TURN servers provided when creating the RTCPeerConnection "),e.errorCode>=300&&e.errorCode<=699||e.errorCode>=700&&e.errorCode}},generateAggregatedStatsFunction111=function(){return t.aggregatedStats||(t.aggregatedStats={}),function(e){let n={};e.forEach((e=>{"inbound-rtp"!=e.type||e.isRemote||"audio"!=e.mediaType&&!e.id.toLowerCase().includes("audio")?"data-channel"==e.mediaType||e.id.toLowerCase().includes("data")?(n.databytesReceived=e.bytesReceived,n.databytesSent=e.bytesSent):"inbound-rtp"!=e.type||e.isRemote||"video"!=e.mediaType&&!e.id.toLowerCase().includes("video")||(n.timestamp=e.timestamp,n.bytesReceived=e.bytesReceived,n.framesDecoded=e.framesDecoded,n.packetsLost=e.packetsLost,n.bytesReceivedStart=t.aggregatedStats&&t.aggregatedStats.bytesReceivedStart?t.aggregatedStats.bytesReceivedStart:e.bytesReceived,n.framesDecodedStart=t.aggregatedStats&&t.aggregatedStats.framesDecodedStart?t.aggregatedStats.framesDecodedStart:e.framesDecoded,n.timestampStart=t.aggregatedStats&&t.aggregatedStats.timestampStart?t.aggregatedStats.timestampStart:e.timestamp,t.aggregatedStats&&t.aggregatedStats.timestamp&&(t.aggregatedStats.bytesReceived&&(n.bitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceived)/(n.timestamp-t.aggregatedStats.timestamp),n.bitrate=Math.floor(n.bitrate),n.lowBitrate=t.aggregatedStats.lowBitrate&&t.aggregatedStats.lowBitrate<n.bitrate?t.aggregatedStats.lowBitrate:n.bitrate,n.highBitrate=t.aggregatedStats.highBitrate&&t.aggregatedStats.highBitrate>n.bitrate?t.aggregatedStats.highBitrate:n.bitrate),t.aggregatedStats.bytesReceivedStart&&(n.avgBitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceivedStart)/(n.timestamp-t.aggregatedStats.timestampStart),n.avgBitrate=Math.floor(n.avgBitrate)),t.aggregatedStats.framesDecoded&&(n.framerate=(n.framesDecoded-t.aggregatedStats.framesDecoded)/((n.timestamp-t.aggregatedStats.timestamp)/1e3),n.framerate=Math.floor(n.framerate),n.lowFramerate=t.aggregatedStats.lowFramerate&&t.aggregatedStats.lowFramerate<n.framerate?t.aggregatedStats.lowFramerate:n.framerate,n.highFramerate=t.aggregatedStats.highFramerate&&t.aggregatedStats.highFramerate>n.framerate?t.aggregatedStats.highFramerate:n.framerate),t.aggregatedStats.framesDecodedStart&&(n.avgframerate=(n.framesDecoded-t.aggregatedStats.framesDecodedStart)/((n.timestamp-t.aggregatedStats.timestampStart)/1e3),n.avgframerate=Math.floor(n.avgframerate)))):n.audiobytesReceived=e.bytesReceived,"track"!=e.type||"video_label"!=e.trackIdentifier&&"video"!=e.kind||(n.framesDropped=e.framesDropped,n.framesReceived=e.framesReceived,n.framesDroppedPercentage=e.framesDropped/e.framesReceived*100,n.frameHeight=e.frameHeight,n.frameWidth=e.frameWidth,n.frameHeightStart=t.aggregatedStats&&t.aggregatedStats.frameHeightStart?t.aggregatedStats.frameHeightStart:e.frameHeight,n.frameWidthStart=t.aggregatedStats&&t.aggregatedStats.frameWidthStart?t.aggregatedStats.frameWidthStart:e.frameWidth),"candidate-pair"==e.type&&e.hasOwnProperty("currentRoundTripTime")&&0!=e.currentRoundTripTime&&(n.currentRoundTripTime=e.currentRoundTripTime)})),n.bitrate,n.framerate,n.framesDropped,n.packetsLost,t.aggregatedStats=n,t.onAggregatedStats&&t.onAggregatedStats(n)}},generateAggregatedStatsFunction=function(){return t.aggregatedStats||(t.aggregatedStats={}),function(e){let n={};e.forEach((e=>{"inbound-rtp"!=e.type||e.isRemote||"video"!=e.mediaType&&!e.id.toLowerCase().includes("video")||(n.timestamp=e.timestamp,n.bytesReceived=e.bytesReceived,n.framesDecoded=e.framesDecoded,n.packetsLost=e.packetsLost,n.bytesReceivedStart=t.aggregatedStats&&t.aggregatedStats.bytesReceivedStart?t.aggregatedStats.bytesReceivedStart:e.bytesReceived,n.framesDecodedStart=t.aggregatedStats&&t.aggregatedStats.framesDecodedStart?t.aggregatedStats.framesDecodedStart:e.framesDecoded,n.timestampStart=t.aggregatedStats&&t.aggregatedStats.timestampStart?t.aggregatedStats.timestampStart:e.timestamp,t.aggregatedStats&&t.aggregatedStats.timestamp&&(t.aggregatedStats.bytesReceived&&(n.bitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceived)/(n.timestamp-t.aggregatedStats.timestamp),n.bitrate=Math.floor(n.bitrate),n.lowBitrate=t.aggregatedStats.lowBitrate&&t.aggregatedStats.lowBitrate<n.bitrate?t.aggregatedStats.lowBitrate:n.bitrate,n.highBitrate=t.aggregatedStats.highBitrate&&t.aggregatedStats.highBitrate>n.bitrate?t.aggregatedStats.highBitrate:n.bitrate),t.aggregatedStats.bytesReceivedStart&&(n.avgBitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceivedStart)/(n.timestamp-t.aggregatedStats.timestampStart),n.avgBitrate=Math.floor(n.avgBitrate)),t.aggregatedStats.framesDecoded&&(n.framerate=(n.framesDecoded-t.aggregatedStats.framesDecoded)/((n.timestamp-t.aggregatedStats.timestamp)/1e3),n.framerate=Math.floor(n.framerate),n.lowFramerate=t.aggregatedStats.lowFramerate&&t.aggregatedStats.lowFramerate<n.framerate?t.aggregatedStats.lowFramerate:n.framerate,n.highFramerate=t.aggregatedStats.highFramerate&&t.aggregatedStats.highFramerate>n.framerate?t.aggregatedStats.highFramerate:n.framerate),t.aggregatedStats.framesDecodedStart&&(n.avgframerate=(n.framesDecoded-t.aggregatedStats.framesDecodedStart)/((n.timestamp-t.aggregatedStats.timestampStart)/1e3),n.avgframerate=Math.floor(n.avgframerate)))),"track"!=e.type||"video_label"!=e.trackIdentifier&&"video"!=e.kind||(n.framesDropped=e.framesDropped,n.framesReceived=e.framesReceived,n.framesDroppedPercentage=e.framesDropped/e.framesReceived*100,n.frameHeight=e.frameHeight,n.frameWidth=e.frameWidth,n.frameHeightStart=t.aggregatedStats&&t.aggregatedStats.frameHeightStart?t.aggregatedStats.frameHeightStart:e.frameHeight,n.frameWidthStart=t.aggregatedStats&&t.aggregatedStats.frameWidthStart?t.aggregatedStats.frameWidthStart:e.frameWidth),"candidate-pair"==e.type&&e.hasOwnProperty("currentRoundTripTime")&&0!=e.currentRoundTripTime&&(n.currentRoundTripTime=e.currentRoundTripTime)})),t.aggregatedStats.receiveToCompositeMs&&(n.receiveToCompositeMs=t.aggregatedStats.receiveToCompositeMs,t.latencyTestTimings.SetFrameDisplayDeltaTime(t.aggregatedStats.receiveToCompositeMs)),t.aggregatedStats=n,t.onAggregatedStats&&t.onAggregatedStats(n)}},this.startLatencyTest=function(e){t.video&&(t.latencyTestTimings.Reset(),t.latencyTestTimings.TestStartTimeMs=Date.now(),e(t.latencyTestTimings.TestStartTimeMs))},this.handleCandidateFromServer=function(e){let n=new RTCIceCandidate(e);t.pcClient.addIceCandidate(n).then((e=>{}))},this.requestOffer=function(){t.pcClient&&(console.log("Closing existing PeerConnection"),t.pcClient.close(),t.pcClient=null),t.pcClient=new RTCPeerConnection(t.cfg),setupPeerConnection(t.pcClient),t.dcClient=setupDataChannel(t.pcClient,"cirrus",t.dataChannelOptions),t.onWebRtcrequestOffer("offer")},this.createOffer=function(){if(t.pcClient&&(t.pcClient.close(),t.pcClient=null),console.log("window.RTCPeerConnection:"+window.RTCPeerConnection),null==window.RTCPeerConnection)return O("window.RTCPeerConnection undefined"),void(navigator.userAgent.includes("Firefox")?window.location="/assets/pages/RTCPeerConnectionDisabled.htm":window.location="/assets/pages/webRtcBlocked.htm");t.pcClient=new RTCPeerConnection(t.cfg),setupPeerConnection(t.pcClient),t.dcClient=setupDataChannel(t.pcClient,"cirrus",t.dataChannelOptions),handleCreateOffer(t.pcClient)},this.receiveAnswer=function(e){var n=new RTCSessionDescription(e);!async function(e,t){await e.pcClient.setRemoteDescription(t).then((function(){setTimeout((function(){}),5e3)})).catch((function(e){e?A("setRemoteDescription:"+e):(w("setRemoteDescription: reloading to test",{color:"Red"}),setTimeout((function(){location.reload()}),5e3))}))}(t,n)},this.close=function(){t.pcClient&&(t.pcClient.close(),t.pcClient=null),t.aggregateStatsIntervalId&&clearInterval(t.aggregateStatsIntervalId)},this.send=function(e){t.dcClient&&"open"==t.dcClient.readyState&&t.dcClient.send(e)},this.getStats=function(e){t.pcClient&&e&&t.pcClient.getStats(null).then((t=>{e(t)}))},this.aggregateStats=function(e){let n=generateAggregatedStatsFunction();t.aggregateStatsIntervalId=setInterval((()=>{t.getStats(n)}),e)}}1!=X?(console=console||{},console.log=function(){},console.info=function(){}):(console=C,console.log=x,console.info=dt);var gt=1;function mt(e){capBpsCmd="Encoder.MaxBitrate "+e;let t={Console:capBpsCmd};zt(t),console.log(t)}function pt(e){capFpsCmd="t.maxFPS "+e;let t={Console:capFpsCmd};zt(t),console.log(t)}function ft(e){var t=document.getElementById("player");re=document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!==document.msFullscreenElement||document.fullscreenElement&&null!==document.fullscreenElement||t&&t.classList.contains("fullscreen");let n=document.getElementById("fullscreen-img");n&&(n.src=re?"assets/images/MinimiseToFullscreen.png":"assets/images/MaximiseToFullscreen.png",n.alt=re?"Shrink to normal size":"Maximise to Fullscreen")}function yt(){re?function(){var e=document.getElementById("player"),t=document.getElementsByClassName("text"),n=document.getElementById("header-tbl"),o=document.exitFullscreen;if(o||["mozCancelFullScreen","msExitFullscreen","webkitExitFullscreen"].forEach((function(e){o=o||document[e]})),o)o.call(document);else{if(e&&(e.classList.remove("fullscreen"),e.classList.add("fixed-size"),e.style.left=""),t)for(let e=0;e<t.length;e++)t[e].style.display="block";n&&(n.style.display="table"),ft(),ht()}}():function(){/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream;var e=document.getElementById("player"),t=document.getElementsByClassName("text"),n=document.getElementById("header-tbl"),o=e.requestFullscreen;if(o||["mozRequestFullScreen","msRequestFullscreen","webkitRequestFullScreen"].forEach((function(t){o=o||e[t]})),o)o.call(e);else{if(e&&(e.classList.add("fullscreen"),e.classList.remove("fixed-size")),t)for(let e=0;e<t.length;e++)t[e].style.display="none";n&&(n.style.display="none"),ft(),ht()}}()}function ht(){var e=document.getElementById("player");let t=e.getElementsByTagName("VIDEO");if(document.documentElement.style.position=re?"fixed":"",document.body.style.position=re?"fixed":"",re){let n=window.innerHeight/window.innerWidth,o=e.clientHeight/e.clientWidth,i=t.videoHeight/t.videoWidth;isNaN(i)?(jt=window.innerWidth,Qt=window.innerHeight,Yt=0,Kt=Math.floor(.5*(window.innerWidth-jt)),e.style.width=jt+"px",e.style.height=Qt+"px"):n<o?(jt=Math.floor(window.innerHeight/i),Qt=window.innerHeight,Yt=0,Kt=Math.floor(.5*(window.innerWidth-jt)),e.style.width=jt+"px",e.style.height=Qt+"px"):(jt=window.innerWidth,Qt=Math.floor(window.innerWidth*i),Yt=Math.floor(.5*(window.innerHeight-Qt)),Kt=0,e.style.width=jt+"px",e.style.height=Qt+"px")}else e.style.height="",e.style.width=""}function vt(e,t,n){var o=document.getElementById(e);o&&(o.onclick=function(o){console.log("-> "+e),Vt(t,n)})}function wt(){console.log("*****captureScreenShot method invoked*****");var e=window.innerWidth,t=window.innerHeight,n=(new Date).getTime(),o=document.getElementById("canvas"),i=o.getContext("2d");o.width=e,o.height=t;var a=document.getElementsByTagName("video");i.drawImage(a[0],0,0,e,t);var s=o.toDataURL("image/png").replace("image/png","image/octet-stream"),l=document.createElement("a");l.setAttribute("download",n+"_screenshot.png"),l.setAttribute("href",s),l.click()}const St={LockedMouse:0,HoveringMouse:1};var bt={controlScheme:St.HoveringMouse,suppressBrowserKeys:!0,fakeMouseWithTouches:!1};function Et(e,t,n,o){if(q)return;let i=Fe(e,t),a=Ue(n,o);var s=new DataView(new ArrayBuffer(9));s.setUint8(0,Xt.MouseMove),s.setUint16(1,i.x,!0),s.setUint16(3,i.y,!0),s.setInt16(5,a.x,!0),s.setInt16(7,a.y,!0),At(s.buffer)}function Bt(e,t,n){let o=Fe(t,n),i=new DataView(new ArrayBuffer(6));i.setUint8(0,Xt.MouseDown),i.setUint8(1,e),i.setUint16(2,o.x,!0),i.setUint16(4,o.y,!0),At(i.buffer)}function Tt(e,t,n){if(q)return;"Mac"==ke.os.name&&2==e||ke.os.name;let o=Fe(t,n);var i=new DataView(new ArrayBuffer(6));i.setUint8(0,Xt.MouseUp),i.setUint8(1,e),i.setUint16(2,o.x,!0),i.setUint16(4,o.y,!0),At(i.buffer)}function It(e,t,n){if(q)return;let o=Fe(t,n);var i=new DataView(new ArrayBuffer(7));i.setUint8(0,Xt.MouseWheel),i.setInt16(1,e,!0),i.setUint16(3,o.x,!0),i.setUint16(5,o.y,!0),At(i.buffer)}function kt(e,t,n){1&e&&Tt(0,t,n),2&e&&Tt(2,t,n),4&e&&Tt(1,t,n),8&e&&Tt(3,t,n),16&e&&Tt(4,t,n)}function Ct(e,t,n){1&e&&Bt(0,t,n),2&e&&Bt(2,t,n),4&e&&Bt(1,t,n),8&e&&Bt(3,t,n),16&e&&Bt(4,t,n)}function xt(e){e&&(function(e){e.onmouseenter=function(t){if(!q){var n=new DataView(new ArrayBuffer(1));n.setUint8(0,Xt.MouseEnter),At(n.buffer),e.pressMouseButtons(t)}},e.onmouseleave=function(t){if(!q){var n=new DataView(new ArrayBuffer(1));n.setUint8(0,Xt.MouseLeave),At(n.buffer),e.releaseMouseButtons(t)}}}(e),Pt(e))}function Mt(e){var t=e.width/2,n=e.height/2;function o(){document.pointerLockElement===e||document.mozPointerLockElement===e?(console.log("Pointer locked"),document.addEventListener("mousemove",i,!1)):(console.log("The pointer lock status is now unlocked"),document.removeEventListener("mousemove",i,!1))}function i(e){t+=e.movementX,n+=e.movementY,t>jt&&(t-=jt),n>Qt&&(n-=Qt),t<0&&(t=jt+t),n<0&&(n=Qt-n),Et(t,n,e.movementX,e.movementY)}e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,e.onclick=function(){e.requestPointerLock()},document.addEventListener("pointerlockchange",o,!1),document.addEventListener("mozpointerlockchange",o,!1),e.onmousedown=function(e){ot(),Bt(e.button,t,n)},e.onmouseup=function(e){ot(),Tt(e.button,t,n)},e.onmousewheel=function(e){ot(),It(e.wheelDelta,t,n)},e.pressMouseButtons=function(e){Ct(e.buttons,t,n)},e.releaseMouseButtons=function(e){kt(e.buttons,t,n)}}var Dt=void 0;function Pt(e){if(null==k)return clearTimeout(Dt),void(Dt=setTimeout((function(){console.log("registerTouchEvents---\x3e ue4ExeInfo == undefined"),Pt(e)}),1e3));console.log("ue4ExeInfo.versionString: "+k.versionString),null==k.versionString||"4.27.1.0"==k.versionString||"4.27.2.0"==k.versionString||k.versionString.startsWith("5.")?function(e){let t=[9,8,7,6,5,4,3,2,1,0],n={};function o(e){let o=t.pop();void 0===o&&console.log("exhausted touch indentifiers"),n[e.identifier]=o}function i(t,o){let i=new DataView(new ArrayBuffer(2+7*o.length));i.setUint8(0,t),i.setUint8(1,o.length);let a=2;for(let t=0;t<o.length;t++){let s=o[t],l=s.clientX-e.offsetLeft,r=s.clientY-e.offsetTop,c=Fe(l,r);i.setUint16(a,c.x,!0),a+=2,i.setUint16(a,c.y,!0),a+=2,i.setUint8(a,n[s.identifier],!0),a+=1,i.setUint8(a,255*s.force,!0),a+=1,i.setUint8(a,c.inRange?1:0,!0),a+=1}At(i.buffer)}if(bt.fakeMouseWithTouches){let t;e.ontouchstart=function(n){if(void 0===t){let o=n.changedTouches[0];t={id:o.identifier,x:o.clientX-Ne.left,y:o.clientY-Ne.top},e.onmouseenter(n),Bt(0,t.x,t.y)}n.preventDefault()},e.ontouchend=function(n){for(let o=0;o<n.changedTouches.length;o++){let i=n.changedTouches[o];if(i.identifier===t.id){Tt(0,i.clientX-Ne.left,i.clientY-Ne.top),e.onmouseleave(n),t=void 0;break}}n.preventDefault()},e.ontouchmove=function(e){for(let n=0;n<e.touches.length;n++){let o=e.touches[n];if(o.identifier===t.id){let e=o.clientX-Ne.left,n=o.clientY-Ne.top;Et(e,n,e-t.x,n-t.y),t.x=e,t.y=n;break}}e.preventDefault()}}else e.ontouchstart=function(e){for(let t=0;t<e.changedTouches.length;t++)o(e.changedTouches[t]);i(Xt.TouchStart,e.changedTouches),e.preventDefault()},e.ontouchend=function(e){i(Xt.TouchEnd,e.changedTouches);for(let i=0;i<e.changedTouches.length;i++)o=e.changedTouches[i],t.push(n[o.identifier]),delete n[o.identifier];var o;e.preventDefault()},e.ontouchmove=function(e){i(Xt.TouchMove,e.touches),e.preventDefault()}}(e):function(e){var t=[9,8,7,6,5,4,3,2,1,0],n={};function o(e){let o=t.pop();void 0===o&&console.log("exhausted touch indentifiers"),n[e.identifier]=o}function i(t,o){if(q)return;let i=new DataView(new ArrayBuffer(2+6*o.length));i.setUint8(0,t),i.setUint8(1,o.length);let a=2;for(let t=0;t<o.length;t++){let s=o[t],l=s.clientX.clamp(1,e.clientWidth-5)-e.offsetLeft,r=s.clientY.clamp(1,e.clientHeight-5)-e.offsetTop,c=Fe(l,r);i.setUint16(a,c.x,!0),a+=2,i.setUint16(a,c.y,!0),a+=2,i.setUint8(a,n[s.identifier],!0),a+=1,i.setUint8(a,255*s.force,!0),a+=1}At(i.buffer)}if(bt.fakeMouseWithTouches){var a=void 0;e.ontouchstart=function(t){if(void 0===a){let n=t.changedTouches[0];a={id:n.identifier,x:n.clientX-Ne.left,y:n.clientY-Ne.top},e.onmouseenter(t),Bt(0,a.x,a.y)}t.preventDefault()},e.ontouchend=function(t){ot();for(let n=0;n<t.changedTouches.length;n++){let o=t.changedTouches[n];if(o.identifier===a.id){Tt(0,o.clientX-Ne.left,o.clientY-Ne.top),e.onmouseleave(t),a=void 0;break}}t.preventDefault()},e.ontouchmove=function(e){for(let t=0;t<e.touches.length;t++){let n=e.touches[t];if(n.identifier===a.id){let e=n.clientX-Ne.left,t=n.clientY-Ne.top;Et(e,t,e-a.x,t-a.y),a.x=e,a.y=t;break}}e.preventDefault()}}else e.ontouchstart=function(e){for(let t=0;t<e.changedTouches.length;t++)o(e.changedTouches[t]);i(Xt.TouchStart,e.changedTouches),e.preventDefault(),clearInterval(Te),clearTimeout(Ie),lt=!1,Te=setInterval(st,10),Ie=setTimeout((function(){clearInterval(Te)}),1e3)},e.ontouchend=function(e){ot(),i(Xt.TouchEnd,e.changedTouches);for(let i=0;i<e.changedTouches.length;i++)e.changedTouches[i],o=e.changedTouches[i],t.includes(n[o.identifier])||(t.push(n[o.identifier]),t.sort((function(e,t){return t-e}))),o.identifier in n&&delete n[o.identifier];var o;e.preventDefault()},e.ontouchmove=function(e){i(Xt.TouchMove,e.touches),e.preventDefault()}}(e)}function Ot(){xe?(console.log("Creating offer"),gn("Starting connection to server, please wait"),_t(5),xe.createOffer(),clearTimeout(ln)):(console.log("WebRTC player not setup, cannot create offer"),fn("Unable to setup video"))}function At(e){q||xe&&(nn(e),xe.send(e))}const Rt={QualityControlOwnership:0,Response:1,Command:2,FreezeFrame:3,UnfreezeFrame:4,VideoEncoderAvgQP:5,LatencyTest:6,InitialSettings:7};var Lt="N/A";function Nt(t,n){function o(){let e=btoa(cn.jpeg.reduce(((e,t)=>e+String.fromCharCode(t)),""));Oe.src="data:image/jpeg;base64,"+e,Oe.onload=function(){cn.height=Oe.naturalHeight,cn.width=Oe.naturalWidth,un(),Ae?(pn(),an()):dn()}}if(xe=new ut({peerConnectionOptions:n.peerConnectionOptions}),t.appendChild(xe.video),xe.onWebRtcrequestOffer=function(e){Se&&1===Se.readyState&&(console.log("->arvind SS: RequestOffer"),Se.send(JSON.stringify({type:"offer"})))},xe.onWebRtcAnswer=function(e){if(Se&&1===Se.readyState){let t=JSON.stringify(e);console.log("->arvind SS: SendAnswer"),Se.send(t)}},xe.onWebRtcOffer=function(e){if(Se&&1===Se.readyState){let t=JSON.stringify(e);console.log("-> SS: offer:"),Se.send(t)}},xe.onWebRtcCandidate=function(e){Se&&1===Se.readyState&&(console.log("-> SS: iceCandidate"),Se.send(JSON.stringify({type:"iceCandidate",candidate:e})))},xe.onVideoInitialised=function(){Se&&1===Se.readyState&&(console.log("----------------- webRtcPlayerObj.onVideoInitialised()--\x3eWS_OPEN_STATE"),1==G("isE3DSEngineApp")&&function(){if(1!=G("isE3DSEngineApp"))return console.warn("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+Lt),void w("Require Atleast E3DS-UE4-Engine 4.26 "+(Math.random()*(.12-.02)+.02).toFixed(4),{timeout:2e3,color:"blue"});var e=JSON.stringify({type:"settings",data:{quality:G("quality"),minBitrate:G("minBitrate"),maxBitrate:G("maxBitrate"),resolution:G("resolution"),rateCtrl:G("rateCtrl")}});0==G("qualityLevel")?e.minBitrate=0:1==G("qualityLevel")&&(e.minBitrate=2e7),console.log("applyInitialeStreamSettings--\x3e "+e),Se.send(e)}(),Ae&&(pn(),an()))},xe.onDataChannelClosed=function(){e&&clearInterval(e)},xe.onDataChannelConnected=function(){Se&&1===Se.readyState&&(gn("WebRTC connected, waiting for video"),_t(100),zt("4K"),Pe=!0,Se.send(JSON.stringify({type:"DoFBEntreyofDataChannelConnectedAt"})),e&&clearInterval(e),e=setInterval((function(){Se.send(JSON.stringify({type:"updateFBEntryofDataChannelHeartBeat"}))}),1e4)),clearTimeout(void 0)},xe.onDataChannelMessage=function(e){!function(e){var t=new Uint8Array(e);if(new TextDecoder("utf-16").decode(e.slice(1)),cn.receiving){let e=new Uint8Array(cn.jpeg.length+t.length);e.set(cn.jpeg,0),e.set(t,cn.jpeg.length),cn.jpeg=e,cn.jpeg.length===cn.size?(cn.receiving=!1,cn.valid=!0,console.log(`received complete freeze frame ${cn.size}`),o()):cn.jpeg.length>cn.size?(console.error(`received bigger freeze frame than advertised: ${cn.jpeg.length}/${cn.size}`),cn.jpeg=void 0,cn.receiving=!1):console.log(`received next chunk (${t.length} bytes) of freeze frame: ${cn.jpeg.length}/${cn.size}`)}else if(t[0]===Rt.fmp4){var n=e.slice(1);console.log("fmp4 size "+n.byteLength),putPacket(n)}else if(t[0]===Rt.QualityControlOwnership){let e=0!==t[1];null!=be&&null!=e&&(be.disabled=e,be.checked=e)}else if(t[0]===Rt.Response){if(q)return;let t=new TextDecoder("utf-16").decode(e.slice(1));console.log("111111111 response: "+t);for(let e of De.values())e(t)}else if(t[0]===Rt.Command){let t=new TextDecoder("utf-16").decode(e.slice(1));console.log("111111111 commandAsString: "+t);let n=JSON.parse(t);"onScreenKeyboard"===n.command&&1==j&&function(e){if(e.showOnScreenKeyboard){let o=unquantizeAndDenormalizeUnsigned(e.x,e.y);var t=o.y.toString()+"px",n=sfsfsf=(o.x-40).toString()+"px";je.style.top=t,je.style.left=n,Jt=!0,je.value,zt({CMD:"sendFocusedWidgetText"})}else Qe()}(n)}else if(t[0]===Rt.FreezeFrame)cn.size=new DataView(t.slice(1,5).buffer).getInt32(0,!0),cn.jpeg=t.slice(5),cn.jpeg.length<cn.size?(console.log(`received first chunk of freeze frame: ${cn.jpeg.length}/${cn.size}`),cn.receiving=!0):(console.log(`received complete freeze frame: ${cn.jpeg.length}/${cn.size}`),o());else if(t[0]===Rt.UnfreezeFrame)Oe.style.display="none",cn.valid=!1;else if(t[0]===Rt.VideoEncoderAvgQP)Lt=new TextDecoder("utf-16").decode(e.slice(1));else if(t[0]==Rt.LatencyTest){let t=new TextDecoder("utf-16").decode(e.slice(1));console.log("Got latency timings from UE."),console.log(t);let n=JSON.parse(t);xe&&xe.latencyTestTimings.SetUETimings(n)}else if(t[0]==Rt.InitialSettings){let t=new TextDecoder("utf-16").decode(e.slice(1));JSON.parse(t)}else console.error(`processResponseData data: unrecognised data received, packet ID ${t[0]}`)}(e)},xt(xe.video),1==j&&function(e){null===document.getElementById("hiddenInput")&&((je=document.createElement("input")).id="hiddenInput",je.style.width="150px",je.style.height="50px",e.appendChild(je),je.addEventListener("keyup",Ye),je.addEventListener("input",Ke),je.onmouseenter=function(e){console.log("onmouseenter hiddenInput")},je.onmouseleave=function(e){console.log("onmouseleave hiddenInput")}),null===document.getElementById("editTextButton")&&((Ge=document.createElement("button")).id="editTextButton",Ge.innerHTML="edit text",e.appendChild(Ge),Ge.addEventListener("click",(function(){Ge.classList.add("hiddenState"),je.value="",je.style.display="block",je.focus()})))}(t),b.length>0){let e=document.getElementById("skip_video");null!==e&&(e.onclick=function(e){document.getElementById("skip_video").style.display="none",Ot()}),document.getElementById("skip_video").style.display="block"}else Ot();return xe.video}function Ft(){xe.onAggregatedStats=e=>{let t=new Intl.NumberFormat(window.navigator.language,{maximumFractionDigits:0}),n=new Intl.NumberFormat(window.navigator.language,{maximumFractionDigits:0,minimumIntegerDigits:2}),o=(e.timestamp-e.timestampStart)/1e3,i=[],a=[60,60];for(let e=0;e<a.length;e++)i.push(o%a[e]),o/=a[e];i.push(o);let s=i[0],l=Math.floor(i[1]),r=Math.floor([i[2]]),c="B",d=e.hasOwnProperty("bytesReceived")?e.bytesReceived:0,u=["kB","MB","GB"];for(let e=0;e<u.length&&!(d<1e5);e++)d/=1e3,c=u[e];audio_receivedBytesMeasurement="kB",audio_receivedBytes=e.hasOwnProperty("audiobytesReceived")?e.audiobytesReceived:0;let g=["MB","GB"];audio_receivedBytes/=1e3;for(let e=0;e<g.length&&!(audio_receivedBytes<1e5);e++)audio_receivedBytes/=1e3,audio_receivedBytesMeasurement=g[e];data_receivedBytesMeasurement="B",data_receivedBytes=e.hasOwnProperty("databytesReceived")?e.databytesReceived:0;let m=["kB","MB","GB"];for(let e=0;e<m.length&&!(data_receivedBytes<1e5);e++)data_receivedBytes/=1e3,data_receivedBytesMeasurement=m[e];data_sentBytesMeasurement="B",data_sentBytes=e.hasOwnProperty("databytesSent")?e.databytesSent:0;let p=["kB","MB","GB"];for(let e=0;e<p.length&&!(data_sentBytes<1e5);e++)data_sentBytes/=1e3,data_sentBytesMeasurement=p[e];let f=document.getElementById("qualityStatus"),y=function(e){console.log(` speed ${e}`);let t=e,n=1,o=setInterval((function(){n-=.1,f&&(f.style=`opacity: ${Math.abs(2*(n-.5))}`),n<=.1&&(0==--t?clearInterval(o):n=1)}),100/e)},h="",v="lime";Lt>35?(v="red",y(2),h+=`<div style="color: ${v}">Bad network connection</div>`,console.log("Bad network connection")):Lt>26&&(v="orange",y(1),h+=`<div style="color: ${v}">Spotty network connection</div>`,console.log("Spotty network connection")),f&&(f.className=`${v}Status`),h+=`<div>Duration: ${n.format(r)}:${n.format(l)}:${n.format(s)}</div>`,h+=`<div>Video Resolution: ${e.hasOwnProperty("frameWidth")&&e.frameWidth&&e.hasOwnProperty("frameHeight")&&e.frameHeight?e.frameWidth+"x"+e.frameHeight:"N/A"}</div>`,h+=`<div>Received (${c}): ${t.format(d)}</div>`,h+=`<div>Video_arvi Received (${c}): ${t.format(d)}</div>`,h+=`<div>Audio Received (${audio_receivedBytesMeasurement}): ${t.format(audio_receivedBytes)}</div>`,h+=`<div>Data Received (${data_receivedBytesMeasurement}): ${t.format(data_receivedBytes)}</div>`,h+=`<div>Data Sent (${data_sentBytesMeasurement}): ${t.format(data_sentBytes)}</div>`,h+=`<div>Frames Decoded: ${e.hasOwnProperty("framesDecoded")?t.format(e.framesDecoded):"N/A"}</div>`,h+=`<div>Packets Lost: ${e.hasOwnProperty("packetsLost")?t.format(e.packetsLost):"N/A"}</div>`,h+=`<div style="color: ${v}">Bitrate (kbps): ${e.hasOwnProperty("bitrate")?t.format(e.bitrate):"N/A"}</div>`,h+=`<div>Framerate: ${e.hasOwnProperty("framerate")?t.format(e.framerate):"N/A"}</div>`,h+=`<div>Frames dropped: ${e.hasOwnProperty("framesDropped")?t.format(e.framesDropped):"N/A"}</div>`,h+=`<div>Latency (ms): ${e.hasOwnProperty("currentRoundTripTime")?t.format(1e3*e.currentRoundTripTime):"N/A"}</div>`,h+=`<div style="color: ${v}">Video Quantization Parameter: ${Lt}</div>`;let w=document.getElementById("stats");w&&(w.innerHTML=h)},xe.aggregateStats(1e3),xe.latencyTestTimings.OnAllLatencyTimingsReady=function(e){if(!e.BrowserReceiptTimeMs)return;let t=e.BrowserReceiptTimeMs-e.TestStartTimeMs,n=0==e.UEPreEncodeTimeMs||0==e.UEPreCaptureTimeMs?"???":e.UEPostEncodeTimeMs-e.UEPreCaptureTimeMs,o=e.UEPostCaptureTimeMs-e.UEPreCaptureTimeMs,i=e.UEPostEncodeTimeMs-e.UEPreEncodeTimeMs,a=e.UETransmissionTimeMs-e.UEReceiptTimeMs,s=t-a,l=t-s-a,r=null,c=null;console.log("timings.FrameDisplayDeltaTimeMs: "+e.FrameDisplayDeltaTimeMs),console.log("timings.BrowserReceiptTimeMs: "+e.BrowserReceiptTimeMs),e.FrameDisplayDeltaTimeMs&&e.BrowserReceiptTimeMs&&(r=e.FrameDisplayDeltaTimeMs+t,c=r-s-a),console.log("endToEndLatency: "+r),console.log("browserSideLatency: "+c);let d="";d+=`<div>Net latency RTT (ms): ${s}</div>`,d+=`<div>UE Capture+Encode (ms): ${n}</div>`,d+=`<div>UE Capture (ms): ${o}</div>`,d+=`<div>UE Encode (ms): ${i}</div>`,d+=`<div>Total UE latency (ms): ${a}</div>`,d+=`<div>Browser send latency (ms): ${l}</div>`,d+=e.FrameDisplayDeltaTimeMs&&e.BrowserReceiptTimeMs?`<div>Browser receive latency (ms): ${e.FrameDisplayDeltaTimeMs}</div>`:"",d+=c?`<div>Total browser latency (ms): ${c}</div>`:"",d+=`<div>Total latency (excluding browser) (ms): ${t}</div>`,d+=r?`<div>Total latency (ms): ${r}</div>`:"",console.log(d),document.getElementById("LatencyStats").innerHTML=d}}function Ut(e,t,n=!0){w(e,{color:"Red"}),setTimeout((function(){location.reload()}),t),le&&(le.domainName,le.topLevelDomainName),window.location.href,Jn.elInfo.instanceId_exeLuncher,Jn.elInfo.computerName,JSON.stringify(ee),JSON.stringify(k),JSON.stringify(ke),n&&O(e)}function _t(e){if(!(b.length>0)){Le+=e,console.log("LunchingProgressAmount:"+Le);var t=document.getElementById("LunchingProgress"),n=document.getElementById("Title_LunchingProgress");Re||n&&(n.style.display="block"),null!==t&&(Re||t&&(t.style.display="block"),t.value=Le)}}function Wt(e){"use strict";var t=document.getElementById("queueNumberText");t&&(t.style.display="none");var n,o=document.getElementById("videoPlayOverlay");if(o&&(o.style.display="none"),console.log(" connectss cirrusServer:  "+JSON.stringify(e)),console.log("111111111111  load()"),(Oe=document.createElement("img")).id="freezeFrameOverlay",Oe.style.display="none",Oe.style.pointerEvents="none",Oe.style.position="absolute",Oe.style.zIndex="30",document.onkeydown=function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation()),ot(),je&&je.value,At(new Uint8Array([Xt.KeyDown,et(e),e.repeat]).buffer),8===e.keyCode&&document.onkeypress({charCode:8}),e.ctrlKey&&e.altKey&&"e"===e.key&&(console.log("111111111111111111111111 keyCode: "+e.keyCode),wt()),bt.suppressBrowserKeys&&Ze(e.keyCode)&&e.preventDefault()},document.onkeyup=function(e){ot(),At(new Uint8Array([Xt.KeyUp,et(e)]).buffer),bt.suppressBrowserKeys&&Ze(e.keyCode)&&e.preventDefault()},document.onkeypress=function(e){ot();let t=new DataView(new ArrayBuffer(3));t.setUint8(0,Xt.KeyPress),t.setUint16(1,e.charCode,!0),At(t.buffer)},n=Ht,De.set("responseHandler01",n),!ae)if(window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket){var i=window.location.href.replace("http://","ws://");console.log(" 1111111111111 window.location.href.replace(http://, ws://) > "+i),i=i.replace("https://","wss://"),console.log(" 1111111111111 window.location.href.replace(https://, wss://) > "+i);var a="wss://"+e.domain+"/ws/"+e.httpsPort+"/";console.log(" connectss url:  "+a),(Se=new WebSocket(a)).onopen=function(t){if(console.log("11111111111111111111 ws.onopen  "),"VrApp"==s.platform){var n={type:"vrApp",serverPublicIp:e.elInfo.serverPublicIp,port:3389};console.log("6666666666666 JSON.stringify(josnObj): "+JSON.stringify(n));var o=function(e){var t=JSON.stringify(e);console.log("encryptJosn JSON.stringify(josnObj): "+t);var n=btoa(t);return console.log("encryptJosn btoa: "+n),console.log("encryptJosn atob: "+atob(n)),n}(n),i="e3dsrdp://"+o;console.log("opening Vr connector:"+i),e3ds_alert("opening Vr connector:"+i,{color:"blue"}),window.open(i,"_blank")}else vn()},Se.onmessage=function(e){console.log(`<- SS: ${e.data}`);var t,n,o,a,l=JSON.parse(e.data);if(console.log("SS--\x3e ws (msg.type: "+l.type),"config"===l.type)!function(e){console.log("onConfig config.peerConnectionOptions: "+JSON.stringify(e.peerConnectionOptions)),_t(5);let t=Nt(document.getElementById("player"),e);switch(an(),bt.controlScheme){case St.HoveringMouse:!function(e){ie="none",e.onmousemove=function(e){Et(e.offsetX,e.offsetY,e.movementX,e.movementY),e.preventDefault()},e.onmousedown=function(e){ot(),Bt(e.button,e.offsetX,e.offsetY),e.preventDefault()},e.onmouseup=function(e){ot(),Tt(e.button,e.offsetX,e.offsetY),e.preventDefault()},e.oncontextmenu=function(e){Tt(e.button,e.offsetX,e.offsetY),e.preventDefault()},"onmousewheel"in e?e.onmousewheel=function(e){It(e.wheelDelta,e.offsetX,e.offsetY),e.preventDefault()}:e.addEventListener("DOMMouseScroll",(function(e){It(-120*e.detail,e.offsetX,e.offsetY),e.preventDefault()}),!1),e.pressMouseButtons=function(e){Ct(e.buttons,e.offsetX,e.offsetY)},e.releaseMouseButtons=function(e){kt(e.buttons,e.offsetX,e.offsetY)}}(t);break;case St.LockedMouse:Mt(t);break;default:console.log(`ERROR: Unknown control scheme ${bt.controlScheme}`),Mt(t)}}(l);else if("playerCount"===l.type)o=l.count-1,(a=document.getElementById("kick-other-players-button"))&&(a.value=`Kick (${o})`);else if("offer"===l.type)console.log(" <- SS arvind offer --\x3e  msg.sdp: %o",l.sdp),n=l,xe.receiveoffer(n),Ft();else if("answer"===l.type)console.log(" answer : "+JSON.stringify(l)),function(e){xe.receiveAnswer(e),Ft()}(l),_t(5);else if("gettings"===l.type)console.log("message type:gettings:  "+JSON.stringify(l)),console.log("message type:gettings msg.data:  "+JSON.stringify(l.data));else if("addInExistingGuestList"===l.type)(d=document.getElementById("Guest-filter"))&&l.guestList.forEach((function(e){var t=document.createElement("option");t.text=t.value=e,d.add(t,d.length-1)}));else if("GuestJoined"===l.type){if(d=document.getElementById("Guest-filter")){var r=document.createElement("option");r.text=r.value=l.guestPlayerId,d.add(r,d.length-1)}}else if("GuestLeft"===l.type){var d;if(d=document.getElementById("Guest-filter"))for(var u=0;u<d.length;u++)d.options[u].value==l.guestPlayerId&&d.remove(u)}else if("sendplayerType"===l.type){le=l.matchmakerInfo;var g=c.get("appVersion");null==g&&(g=-1),console.log(" 1111111111111 window.location.href.replace(https://, wss://) > "+i),null==ee&&(ee="undefined"),s.clientSideInfo={},s.clientSideInfo.url=window.location.href,s.clientSideInfo.userAgent=navigator.userAgent,s.clientSideInfo.clientInfo=ee,s.clientSideInfo.userDeviceInfo=ke;var m=JSON.stringify({type:"takePlayerType",isSpectator:q,hostMeetingId:U,GuestMeetingId:G("GuestMeetingId"),version:g,userDeviceInfo:ke,ConfigName:J,urlVersion:L,appName:G("appName"),navigationType:window.location.href,url:window.location.href,userAgent:navigator.userAgent,clientInfo:ee,serverOwner:G("owner"),forceMeetingMode:V,accessedTopLevelDomainName:Z,url_searchParams:String(c),TurnServerMode:ue,configuration:s});console.log(" ws.send(): "+JSON.stringify(m)),Se.send(m)}else if("handleElDisconnected"===l.type)Ut("EL crashed.So redirecting you in 3 sec to re-establish connection",5e3);else if("handleStreamerDisconnected"===l.type)Ut("Streamer Disconnected.So redirecting you in 3 sec to re-establish connection",5e3);else if("ping"===l.type)console.log("ping rcived . sending pong"),Se.send(JSON.stringify({type:"pong"}));else if("reload"===l.type)location.reload();else if("ConfigUpdateOnClientSide"===l.type)window.location.href=window.location.href;else if("redirectTo"===l.type)console.log("222222 <- SS: msg.data.url: "+l.url),window.location.replace(l.url);else if("jsonMessageForUE4"===l.type)console.log("jsonMessageForUE4: "+JSON.stringify(l.jsonObj)),zt(l.jsonObj);else if("ShowThisHtmlPage"===l.type)ae=!0,Se.close(),self.location=l.htmlPage;else if("setGuestId"===l.type)document.getElementById("GuestTitle").innerHTML=l.guestId;else if("ShowE3ds_alert"===l.type){console.log("222222 <- SS: ShowE3ds_alert msg.data.info: "+l.data.info);var p={};null!=l.data.color&&(p.color=l.data.color),null!=l.data.timeout&&(p.timeout=l.data.timeout),w(l.data.info,p)}else if("UE5Editorlunched"===l.type){console.log(JSON.stringify(l));var f="http://"+l.url+":"+l.port;console.log("UE5Editorlunched url "+f),location.assign(f)}else if("UE4LogFromEL"===l.type)console.info(l.data.logLine);else if("ShowInfo"===l.type){console.log("222222 <- SS: msg.data.info: "+l.data.info),p={},null!=l.data.color&&(p.color=l.data.color),null!=l.data.timeout&&(p.timeout=l.data.timeout),l.data.info.startsWith("EL Error:")&&(console.error(l.data.info),w(l.data.info,p));try{var y=JSON.parse(l.data.info);console.log("33333 <- SS: msg.data.info: "+JSON.stringify(y));var h=document.getElementById("Title_AcquiringProgresss"),v=document.getElementById("AcquiringProgress"),S=document.getElementById("Title_PreparingProgress"),b=document.getElementById("PreparingProgress"),E=document.getElementById("LunchingProgress"),B=document.getElementById("Title_LunchingProgress");if("AppAcquiringData"==y.datatype){if(console.log("5555 <- AppAcquiringData AcquiringProgress: "+y.data.percent),h.style.display="block",Re=!0,null!==v){v.value=100*y.data.percent;var T={type:"stage3_1_AppAcquiringProgress",percent:y.data.percent};ze(T),E.style.display="none",B.style.display="none",v.style.display="block",v.value>=100&&(S.style.display="block",null!==b&&(b.value=0,b.style.display="block"))}}else"AppPreparationData"==y.datatype&&(Re=!0,T={type:"stage3_2_AppPreparationProgress",percent:y.data.percent},ze(T),y.data.percent>=100&&(Re=!1,it(),tn()),null!==b&&(b.value=y.data.percent,b.style.display="block",S.style.display="block",E.style.display="none",B.style.display="none",b.value>=100&&(B.style.display="block",null!==E&&(E.value=0,E.style.display="block"))))}catch(e){}}else if("mapIsReadyToSurve"===l.type)clearTimeout(ln),fn("Map Ready"),Ot();else if("TakeuserDeviceInfo"===l.type)ke=l.userDeviceInfo,console.log(`userDeviceInfo : ${JSON.stringify(ke)}`),console.log(`elInfo : ${JSON.stringify(l.elInfo)}`),console.log(" 1111111111111 useExtendedTyping > "+j);else if("OnLocalFileUploadingFinished"===l.type)window.open(l.data.Location,"_blank");else if("OnFinishingOfClientFileDownladOnEL"===l.type){let e={cmd:"onUploadedFileAvailable",filename:l.data.filename};zt(e),console.log(e)}else"ue4Version"===l.type?l.currentAppsUE4Version:"ue4ExeInfoMsg"===l.type?((k=l.ue4ExeInfo).versionString,console.log("ue4AppExe path:"+k.ue4AppExe)):"iceCandidate"===l.type?(t=l.candidate,xe&&xe.handleCandidateFromServer(t),_t(5)):"DisableControlFromOthers"===l.type?q=!0:"GiveControlToThisGuest"===l.type?q=!1:console.warn(`invalid SS message type: ${l.type}`)},Se.reconnectAttempt=0,Se.onerror=function(e){console.error(`WS error: ${JSON.stringify(e)}`),console.error("redirecting to: "+window.location.href),l(e)},Se.onclose=function(e){console.error(`WS closed: ${JSON.stringify(e.code)} - ${e.reason}`),console.error("WS closed:"+JSON.stringify(e)),l(e)},Se.onclose111=function(e){console.warn(`WS closed: ${JSON.stringify(e.code)} - ${e.reason}`+window.location.href),Se=void 0;let t=document.getElementById("player");xe&&(t.removeChild(xe.video),xe.close(),xe=void 0),fn(`Disconnected: ${e.reason}`),setTimeout(start,4e3)}}else alert("Your browser doesn't support WebSocket");function l(e){if(B){Se&&(Se.reconnectAttempt++,console.error("ssReconnec() reconnectAttempt:"+Se.reconnectAttempt)),Se=void 0;var t=function(e){if(e>=0&&e<=999)return"(Unused)";if(e>=1016){if(e<=1999)return"(For WebSocket standard)";if(e<=2999)return"(For WebSocket extensions)";if(e<=3999)return"(For libraries and frameworks)";if(e<=4999)return"(For applications)"}return void 0!==D[e]?D[e]:"(Unknown)"}(e.code),n="SS crashed.Redirecting you in 3 sec to re-establish connection. "+JSON.stringify(e.code)+" : "+e.reason+" : "+t,o=!1;1e3!=e.code&&1001!=e.code&&1006!=e.code&&(o=!0),console.error(`WS closed: ${JSON.stringify(e.code)} - ${e.reason}`),Ut(n,5e3,o)}}}function ze(e){window.top.postMessage(e,"*")}function Ht(e){if(console.log(" handleUnrealResponse(descriptor) : "+e),"function"==typeof onResponseFromUnreal?onResponseFromUnreal(e):console.log("not found onResponseFromUnreal"),window.top.postMessage(e,"*"),"getCmdLineArgs"===e){let e={};e.cmdLineArgs=Ce,console.log("33333333333333 sendDataToUE4App emitUIInteraction: "+JSON.stringify(e)),zt(e)}else{let t;try{t=JSON.parse(e),console.log("5555555555555 handleUnrealResponse JSON.stringify(JSON.parse(descriptor)) : "+JSON.stringify(t))}catch(e){console.log("5555555555555 handleUnrealResponse JSON.parse fails")}!function(e){if(console.log("5555555555555 ahsanHandleResponseFunction(obj) :"+JSON.stringify(e)),null!=e)switch(console.log("5555555555555 ahsanHandleResponseFunction obj.cmd :"+e.cmd),e.cmd){case"misctasks":an();break;case"takeFocusedWidgetText_old":Jt&&(Jt=!1,Ke(),e.value);break;case"takeFocusedWidgetText":Jt&&(Jt=!1,je.value=e.value,je.style.display="block",Ke(),je.focus());break;case"getCmdLineArgs":{let e={};e.cmdLineArgs=Ce,console.log("33333333333333 sendDataToUE4App emitUIInteraction: "+JSON.stringify(e)),zt(e)}break;case"getIpaddress":{let e={Ipaddress:"contactAhsanASAP"};console.log("33333333333333 sendDataToUE4App emitUIInteraction: "+JSON.stringify(e)),zt(e)}break;case"redirectTo":window.location.href=e.value;break;case"lunchKeyBoard":if(e.isFoused){var t=document.getElementById("textaaa");t||showError("elem is null"),ShowOverlayAhsan(),t.value=e.currentText,t.focus()}else console.log("not isFoused");break;case"sendLocalFileToUE4":!function(e){console.log("Browsing");const t=document.createElement("input");t.setAttribute("type","file"),t.style.display="none",document.getElementsByTagName("body")[0].appendChild(t),t.addEventListener("change",(()=>{const n=t.files[0];var o,i;console.log("file",n),(o=n.type,i=n.name,fetch(`https://l2su2tcf2a.execute-api.us-east-1.amazonaws.com/default/s3-upload-from-ss?content_type=${o}&file_name=${i}&folder=folderName`,{method:"GET"}).then((e=>e.json())).then((e=>JSON.parse(e.result.body).uploadURL)).catch((e=>{console.error("Failed to retrieve upload URL")}))).then((t=>{!function(e,t,n,o){let i=new XMLHttpRequest;i.open("PUT",e,!0),i.setRequestHeader("Content-type",t),i.onload=function(){let t=i.responseText;if(4==i.readyState&&"200"==i.status){console.log("Successfully uploaded",t),console.log("file:",n),console.log("DIRECT URL",e.split("?")[0]);var a=JSON.stringify({type:"askElToDownloadFileTO",url:e.split("?")[0],downloadPath:o+n.name});Se&&(console.log(" ws.send(): "+JSON.stringify(a)),Se.send(a))}else console.error(t)},i.onprogress=function(e){console.log("Progress",e)},i.send(n)}(t,n.type,n,e)}))})),t.click()}(e.pathToSaveFile);break;case"ToggleBrowserMouse":Y=!Y,ve();break;case"lunchCallApp":console.log(e.value),window.open("tel:"+e.value,"_self");break;case"lunchMailApp":var n="mailto:"+e.value+"?subject="+e.value+"&body="+e.value;window.open(n,"_blank");break;case"sendDeviceInfo":zt({userDeviceInfo:ke});break;case"sendUserInfoInPlainJson":let i={};i=ee,zt(i);break;case"sendUserInfo":zt({clientInfo:ee});break;case"generateDownloadableCSV":console.log(JSON.stringify(e.value)),function(e,t){for(var n=function(e){for(var t="",n=0;n<e.length;n++){var o=null===e[n]?"":e[n].toString();e[n]instanceof Date&&(o=e[n].toLocaleString());var i=o.replace(/"/g,'""');i.search(/("|,|\n)/g)>=0&&(i='"'+i+'"'),n>0&&(t+=","),t+=i}return t+"\n"},o="",i=0;i<t.length;i++)o+=n(t[i]);console.log("5555555555555 csvFile content :"+o),console.log("5555555555555 csvFile filename :"+e);var a=new Blob([o],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(a,e);else{var s=document.createElement("a");if(void 0!==s.download){var l=URL.createObjectURL(a);s.setAttribute("href",l),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}}(e.filename,e.csvRows);break;case"captureScreenShot":wt();break;case"toggleFullscreen":yt();break;case"ForeceEndTab":window.close();break;case"ForeceEndSession":window.location="/assets/pages/SessionEnded.htm";break;case"lunchUrl":console.log(e.value),window.open(e.value,"_blank");break;case"downloadLocalFileOnUserDevice":var o=JSON.stringify({type:"forwardToEL",objFromUE4:e});Se&&(console.log(" ws.send(): "+JSON.stringify(o)),Se.send(o))}}(t)}}document.getElementById("Title_AcquiringProgresss"),document.getElementById("AcquiringProgress"),document.getElementById("Title_PreparingProgress"),document.getElementById("PreparingProgress"),document.getElementById("LunchingProgress"),document.getElementById("Title_LunchingProgress"),ze({type:"stage3_slotOccupied"});var Jt=!1;function qt(){At(new Uint8Array([Xt.RequestQualityControl]).buffer)}function Vt(e,t){let n={Console:"r.setRes "+e+"x"+t};1==G("isAdminDebugging")&&console.log(n),zt(n)}function $t(e){null!==e.PrioritiseQuality&&zt({Console:"Streamer.PrioritiseQuality "+e.PrioritiseQuality}),null!==e.LowBitrate&&zt({Console:"Streamer.LowBitrate "+e.LowBitrate}),null!==e.HighBitrate&&zt({Console:"Streamer.HighBitrate "+e.HighBitrate}),null!==e.MinFPS&&zt({Console:"Streamer.MinFPS "+e.MinFPS})}const Xt={IFrameRequest:0,RequestQualityControl:1,MaxFpsRequest:2,AverageBitrateRequest:3,StartStreaming:4,StopStreaming:5,LatencyTest:6,RequestInitialSettings:7,UIInteraction:50,Command:51,KeyDown:60,KeyUp:61,KeyPress:62,MouseEnter:70,MouseLeave:71,MouseDown:72,MouseUp:73,MouseMove:74,MouseWheel:75,TouchStart:80,TouchEnd:81,TouchMove:82,GamepadButtonPressed:90,GamepadButtonReleased:91,GamepadAnalog:92};function zt(e){!function(e,t){let n=JSON.stringify(t);1==G("isAdminDebugging")&&console.log("33333333333333 descriptorAsString: "+n);let o=new DataView(new ArrayBuffer(3+2*n.length)),i=0;o.setUint8(i,e),i++,o.setUint16(i,n.length,!0),i+=2;for(let e=0;e<n.length;e++)o.setUint16(i,n.charCodeAt(e),!0),i+=2;At(o.buffer)}(Xt.UIInteraction,e)}function Gt(e){console.log("receiveCommand: "+JSON.stringify(e));try{const t=JSON.parse(e.data);null!=t.Type?(console.log("Command received, parsed and accepted: %s",e.data),zt(t)):"EmulatePlayButtonPressed"==t.cmd?mn():"sendToUe4"==t.cmd?zt(t.value):console.log("Command received and parsed, but not accepted: %s",e.data)}catch(t){console.log("error receiveCommand(): Command received, but could not parse: "+JSON.stringify(e.data))}}sendToUnreal=function(e){zt(e)};var jt,Qt,Yt,Kt,Zt={enabled:!1,warnTimeout:void 0,closeTimeout:void 0,active:!1,overlay:void 0,warnTimer:void 0,countdown:0,countdownTimer:void 0};function en(){if(!Zt.overlay)return;const e=document.getElementById("afk-second-text");Zt.overlay.style.display="block",e.innerText=Zt.countdown}function tn(){"0"!=s.isAfkEnabled?(Zt.warnTimeout=60*s.afkWarnTimeout,Zt.closeTimeout=60*s.afkCloseTimeout,Zt.active=!0,Zt.enabled=!0,nn()):console.log("AFK is disabled")}function nn(e){e&&1===e.byteLength||Zt.active&&(clearTimeout(Zt.warnTimer),Zt.overlay&&(Zt.overlay.style.display="none"),Zt.warnTimer=setTimeout((function(){console.log("Showing afk overlay"),function(){if(Zt.enabled)if(!isNaN(Zt.countdown)&&Zt.warnTimeout>0&&Zt.warnTimeout<1e3){if(Zt.countdown=Zt.closeTimeout,bt.controlScheme==St.LockedMouse&&document.exitPointerLock(),clearInterval(Zt.countdownTimer),Zt.countdownTimer=setInterval((function(){Zt.countdown--,0==Zt.countdown?(Se&&Se.close(),_e()?Rn("You have been disconnected for not being active,please refresh the page "):Rn("You have been disconnected for not being active,to start a new session please visit: "+location.href)):en()}),1e3),Zt.overlay)return en(),void(Zt.overlay.style.display="block");Zt.active=!1,Zt.overlay=document.getElementById("afkOverlay"),function(e,t,n){const o=document.getElementById("player");t&&o.appendChild(t),Zt.overlay&&n&&Zt.overlay.addEventListener("click",n),o.classList.add("clickableState")}(0,Zt.overlay,(e=>{clearInterval(Zt.countdownTimer),tn()}))}else console.log("AFK ",Zt.countdown,Zt.warnTimeout);else console.log("Not showing overlay because afk disabled.")}()}),1e3*Zt.warnTimeout))}function on(e){console.log("------------resizePlayerStyle2"),an()}function an(e){var t=document.getElementById("player");t&&(sn(),t.classList.contains("fixed-size")||(function(e){let t=e.getElementsByTagName("VIDEO"),n=window.innerHeight/window.innerWidth,o=e.clientHeight/e.clientWidth,i=t.videoHeight/t.videoWidth;var a;isNaN(i)?(jt=window.innerWidth,Qt=window.innerHeight,a="top: "+(Yt=0)+"px; left: "+(Kt=0)+"px; width: "+jt+"px; height: "+Qt+"px; cursor: "+ie+"; "+oe):n<o?(jt=Math.floor(window.innerHeight/i),Qt=window.innerHeight,Yt=0,Kt=Math.floor(.5*(window.innerWidth-jt)),a="top: "+Yt+"px; left: "+Kt+"px; width: "+jt+"px; height: "+Qt+"px; cursor: "+ie+"; "+oe):(jt=window.innerWidth,Qt=Math.floor(window.innerWidth*i),a="top: "+(Yt=Math.floor(.5*(window.innerHeight-Qt)))+"px; left: "+(Kt=0)+"px; width: "+jt+"px; height: "+Qt+"px; cursor: "+ie+"; "+oe),function(e,t){if(!(b.length>0)||Pe)if(2==gt||null==F){e.style=t+";background-image: 'none';",document.getElementsByClassName("loader"),document.getElementById("videoPlayOverlay");var n="#FFFFFFFF";(o=document.getElementById("loaderStep1"))&&(o.style.background=n),(o=document.getElementById("loaderStep2"))&&(o.style.background=n),(o=document.getElementById("loaderStep3"))&&(o.style.background=n)}else if(null!=F){var o;e.style=t+";background-image: url("+te+");",console.log("9999999999 playerElement.style:  "+e.style),n="#FFFFFF00",(o=document.getElementById("loaderStep1")).style.background=n,(o=document.getElementById("loaderStep2")).style.background=n,(o=document.getElementById("loaderStep3")).style.background=n}}(e,a)}(t),Ne=t.getBoundingClientRect(),Cn(),un()))}function sn(){if((new Date).getTime()-Me>1e3){var e=document.getElementById("player");if(!e)return;Vt(e.clientWidth,e.clientHeight),Me=(new Date).getTime()}else console.log("Resizing too often - skipping"),clearTimeout(Ee),Ee=setTimeout(sn,1e3)}var ln,rn,cn={receiving:!1,size:0,jpeg:void 0,height:0,width:0,valid:!1};function dn(){cn.valid&&(Oe.style.display="block")}function un(){if(0!==cn.width&&0!==cn.height){let e=0,t=0,n=0,o=0;{let i=window.innerWidth/window.innerHeight,a=cn.width/cn.height;i<a?(e=window.innerWidth,t=Math.floor(window.innerWidth/a),n=Math.floor(.5*(window.innerHeight-t)),o=0):(e=Math.floor(window.innerHeight*a),t=window.innerHeight,n=0,o=Math.floor(.5*(window.innerWidth-e)))}Oe.style.width=e+"px",Oe.style.height=t+"px",Oe.style.left=o+"px",Oe.style.top=n+"px"}}function gn(e){console.log("restartAnimationText---\x3e : "+e)}function mn(){var e=document.getElementById("streamingVideo");if(e&&(e.style.backgroundColor="black"),xe){gt=2,an();try{xe.video.play(),xe.handleOnAudioTrack(I)}catch(e){console.log("webRtcPlayerObj.video.play() E:"),console.log(e)}var t=document.getElementById("videoPlayOverlay");t&&(t.style.display="none"),document.getElementById("bottm_left_slider");var n=document.getElementById("e3ds_bottom_panelObj");n&&(n.style.display="block"),1==Q&&(document.getElementById("flow-meeting").style.display="block",document.getElementById("voipControlPanel").style.display="flex",document.getElementById("e3ds_bottom_panelObj_left_bottom").style.display="block");var o={type:"stage5_playBtnPressed"};tn(),ze(o),zt(o),En()}At(new Uint8Array([Xt.RequestInitialSettings]).buffer),qt(),dn(),En();var i=document.getElementById("overlay");if(i){if(null!=U){let e=document.getElementById("overlayButton");i.style.display="block",e.style.display="block"}if(null!=_){let e=document.getElementById("GuestSettings");"none"===e.style.display||""===e.style.display?(i.style.display="block",e.style.display="block"):(i.style.display="block",e.style.display="none")}0!=G("showPsControl")&&(i.style.display="block",document.getElementById("overlayPSSettings").style.display="block")}}function pn(){1==me?mn():(bn(2),function(e,t){console.log("setOverlayCustom---\x3e 11111111111111111: "),Ae=!1;var n=document.getElementById("clickToPlay");if(!n){var o=document.getElementById("player");(n=document.createElement("div")).id="videoPlayOverlay",o.appendChild(n)}for(;n.lastChild;)n.removeChild(n.lastChild);var i=document.getElementById("playButton");if(!i){var a=document.createElement("img");a.id="playButton",a.src=null!=z?z:"assets/images/Play_button2.png",a.alt="!!!!!",a&&n.appendChild(a),i=a}i.style.display="block",n.style.display="block";ze({type:"stage4_playBtnShowedUp"}),t&&n&&n.addEventListener("click",(function e(o){t(),n.removeEventListener("click",e),document.getElementById("videoPlayOverlay")&&(n.style.display="none")})),n&&n.classList.add("clickableState")}(0,(e=>{mn()})))}function fn(e){console.log("showTextOverlay---\x3e "+e),w(e,{timeout:2e3,color:"blue"});var t=document.createElement("div");t.id="messageOverlay",t.innerHTML=e||""}function yn(e){clearTimeout(rn),rn=setTimeout((function(){an()}),500)}function hn(){for(window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.open("GET","http://api.hostip.info/get_html.php",!1),xmlhttp.send(),hostipInfo=xmlhttp.responseText.split("\n"),i=0;hostipInfo.length>=i;i++)if(ipAddress=hostipInfo[i].split(":"),"IP"==ipAddress[0])return console.log("11111111111111myIP :"+ipAddress[1]),console.log(ipAddress),ipAddress[1].trim();return!1}function vn(){const e=hn();console.log("myIP---\x3e",hn);const t=new XMLHttpRequest;t.open("POST","https://ssrelay-api.eaglepixelstreaming.com/api/v1/xirsys",!0),t.setRequestHeader("Content-type","application/json; charset=utf-8"),t.onreadystatechange=function(e){if(4==t.readyState&&200==t.status){let e=JSON.parse(t.responseText);console.log("xirsys response: ",e),console.log("xirsys xhr.responseText: ",t.responseText),console.log("xirsys xhr.response: ",t.response),Sn(JSON.stringify({type:"xirsysResponse",TurnServerMode:ue,responseText:t.responseText}))}else 4==t.readyState&&200!=t.status&&vn()};const n=JSON.stringify({ip:e});t.send(n)}var wn=void 0;function Sn(e){Re||_t(5),clearTimeout(wn),Se&&1===Se.readyState?(console.log("xirsys ws.send(): "+JSON.stringify(e)),Se.send(e)):wn=setTimeout((function(){Sn(e)}),1e3)}function bn(e){console.log("showLoader: "+e),En(),obj=document.getElementById("loaderStep"+e),obj?obj.style.display="flex":console.log("loaderStep"+e+" does not exist")}function En(){var e=document.getElementById("loaderStep1");e?e.style.display="none":console.log("loaderStep1 does not exist"),(e=document.getElementById("loaderStep2"))?e.style.display="none":console.log("loaderStep2 does not exist"),(e=document.getElementById("loaderStep3"))?e.style.display="none":console.log("loaderStep3 does not exist")}var Bn=void 0,Tn=void 0,In=0,kn=!0;function Cn(){let e=document.getElementById("player"),t=e.getElementsByTagName("video");if(e&&t.length>0){let n=e.clientHeight/e.clientWidth,o=t[0].videoHeight/t[0].videoWidth;if(n>o){let t=n/o;Fe=(n,o)=>{let i=n/e.clientWidth,a=t*(o/e.clientHeight-.5)+.5;return i<0||i>1||a<0||a>1?{inRange:!1,x:65535,y:65535}:{inRange:!0,x:65536*i,y:65536*a}},unquantizeAndDenormalizeUnsigned=(n,o)=>{let i=(o/65536-.5)/t+.5;return{x:n/65536*e.clientWidth,y:i*e.clientHeight}},Ue=(n,o)=>({x:n/(.5*e.clientWidth)*32767,y:t*o/(.5*e.clientHeight)*32767})}else{let t=o/n;Fe=(n,o)=>{let i=t*(n/e.clientWidth-.5)+.5,a=o/e.clientHeight;return i<0||i>1||a<0||a>1?{inRange:!1,x:65535,y:65535}:{inRange:!0,x:65536*i,y:65536*a}},unquantizeAndDenormalizeUnsigned=(n,o)=>{let i=o/65536;return{x:((n/65536-.5)/t+.5)*e.clientWidth,y:i*e.clientHeight}},Ue=(n,o)=>({x:t*n/(.5*e.clientWidth)*32767,y:o/(.5*e.clientHeight)*32767})}}}ze({type:"stage1_inqueued"});var xn=void 0;function Mn(e){if(null!=s.ForceLandScapeMode&&0!=s.ForceLandScapeMode&&(Be=document.getElementById("rotateOverlay"))&&(window.innerHeight>window.innerWidth?(Be.style.width=window.innerWidth.toString()+"px",Be.style.height=window.innerHeight.toString()+"px",Be.style.display="block"):Be.style.display="none"),kn){var t=document.getElementById("player");if(!t)return xn&&clearTimeout(xn),void(xn=setTimeout((function(){Mn()}),100));Ne=t.getBoundingClientRect(),Cn(),t.classList.contains("fixed-size")||(window.innerWidth<t.videoWidth||(window.innerHeight,t.videoHeight),function(e){let t=e.getElementsByTagName("VIDEO"),n=window.innerHeight/window.innerWidth,o=e.clientHeight/e.clientWidth,i=t.videoHeight/t.videoWidth;var a;isNaN(i)?(jt=window.innerWidth,Qt=window.innerHeight,a="top: "+(Yt=0)+"px; left: "+(Kt=0)+"px; width: "+jt+"px; height: "+Qt+"px; cursor: "+ie+"; "+oe):n<o?(jt=Math.floor(window.innerHeight/i),Qt=window.innerHeight,Yt=0,Kt=Math.floor(.5*(window.innerWidth-jt)),a="top: "+Yt+"px; left: "+Kt+"px; width: "+jt+"px; height: "+Qt+"px; cursor: "+ie+"; "+oe):(jt=window.innerWidth,Qt=Math.floor(window.innerWidth*i),a="top: "+(Yt=Math.floor(.5*(window.innerHeight-Qt)))+"px; left: "+(Kt=0)+"px; width: "+jt+"px; height: "+Qt+"px; cursor: "+ie+"; "+oe),function(e,t){null!=te?document.getElementById("videoPlayOverlay").style=`${t};background-image: url("${te}");`:e.style=t}(e,a)}(t))}}function Dn(){kn=!0;var e=void 0;null!=s?((e={}).type="takeIdentity",e.clientType="player",e.configurationObj=s,e.serverOwner=s.owner,e.appName=s.appName,e.userAgent=navigator.userAgent,e.GuestMeetingId=s.GuestMeetingId,e.url=window.location.href,e.userDeviceInfo=ke,e.clientInfo=ee):e={type:"takeIdentity",clientType:"player",configurationObj:s,userAgent:navigator.userAgent,serverOwner:window.location.pathname.substring(1),url:window.location.href,appName:G("appName"),userDeviceInfo:ke,clientInfo:ee},console.log("77777 ws4queue.send(): "+JSON.stringify(e)),Bn.send(JSON.stringify(e))}function Pn(e){var t=document.getElementById("streamingVideo"),n=b[e];console.log("videoPlay() :",e,n),t.setAttribute("src",n),t.setAttribute("type","video/mp4"),t.autoplay=!0,t.muted=!0,t.load()}Mn(),window.onload=function(){"v5"!=L&&"v4"!=L&&"v6"!=L||q||qn()};var On,An=0;function Rn(e){console.log("showPageWIthMsg: "+e),self.location="/error/"+btoa(e).toString("base64")}function Ln(){null!=ee&&null!=s&&null!=s.EmulatedGeoLocationInfo&&""!=s.EmulatedGeoLocationInfo.longitude&&""!=s.EmulatedGeoLocationInfo.latitude&&(ee.latitude=s.EmulatedGeoLocationInfo.latitude,ee.longitude=s.EmulatedGeoLocationInfo.longitude,ee.city="emulated_"+ee.city,ee.country_name="emulated_"+ee.country_name)}function Nn(e){var t=e.split(/\D+/);return new Date(Date.UTC(t[0],--t[1],t[2],t[3],t[4],t[5],t[6]))}function Fn(e){var t;t="https://controlpanel.eagle3dstreaming.com/"+W+"/getUsersinfo",1==G("isAdminDebugging")&&console.log("CheckTrailVersion url : ",t);var n=new XMLHttpRequest;n.successHappend=!1,n.onreadystatechange=function(){if(429==n.status)return null!=On&&clearTimeout(On),void(On=setTimeout(Fn,2e3));var e,t,o;if(422!=n.status)if(""!=n.responseText&&null!=n.responseText&&200==n.status){if(n.successHappend)return;n.successHappend=!0,clearTimeout(Fn);try{var i=JSON.parse(n.responseText);if(null!=i.SubscriptionStartDate){var a=new Date(i.SubscriptionStartDate).toISOString(),s=void 0;null!=i.SubscriptionEndDate?s=new Date(i.SubscriptionEndDate).toISOString():null==i.SubscriptionEndDate&&(a=new Date(i.SubscriptionStartDate),(s=new Date(i.SubscriptionStartDate)).setDate(a.getDate()+7),s=s.toISOString(),A("SubscriptionEndDate missing for : "+W+" .so setting SubscriptionEndDate:"+s));var l=(e=s,t=(new Date).toISOString(),o=(Nn(e)-Nn(t))/1e3,Math.ceil(o));1==G("isAdminDebugging")&&console.log("Subscription diff:",l),l>0||A("SubscriptionExpired for : "+W+" . SubscriptionStartDate:"+a+" . SubscriptionEndDate:"+s+n.responseText),Vn()}else Vn()}catch(e){console.log("onTrailCheckPassed  error responseText: "+n.responseText),console.log("onTrailCheckPassed  objError: "+e),Vn()}}else null!=On&&clearTimeout(On)},n.open("GET",t,!0);try{n.send(null)}catch(e){console.log("XXXXXXXXXXXXXXXXXXX CheckTrailVersion try catch error : "),console.log(e)}}var Un=document.getElementById("popupForPasswordToStart");function _n(e){if("v5"!=L&&"v6"!=L||(null!=s&&(s=e.appconfig),function(){var e=G("loadingVideoList");if(null!=e&&(b=e),""!=(l=G("BGI"))&&(b.length>0||(F=l,an())),""!=(l=G("BGI4Queue"))&&(te=l,Mn()),""!=(l=G("Logo")))if(b.length>0);else{N=l;var t=document.getElementById("prgoressScreenLogo1img"),n=document.getElementById("playBtnScreenLogo1img"),o=document.getElementById("prgoressScreenLogo1");null!=N&&(t.src=N,n.src=N),null!=o&&(o.style.display="block",o.style.display="block"),t&&(t.style.display="block",t.style.display="block"),n&&(n.style.display="block",n.style.display="block")}""!=(l=G("PlayBtn"))&&(z=l);let i=G("TitleBarIcon");if(""!=i&&null!=i||(i="./assets/images/0.png"),""!=i&&null!=i){var a=document.createElement("link"),s=document.getElementById("TitleBarIcon");a.id="TitleBarIcon",a.rel="shortcut icon",a.href=i,s&&document.head.removeChild(s),document.head.appendChild(a)}var l;if(""!=(l=G("LoadingImg")))if(b.length>0);else{var r=l,c=document.getElementById("prgoressScreenLoadingimg");null!=r&&c&&(c.src=r),c&&(c.style.display="block")}}()),null!=s.urlExpiretime){if(new Date>new Date(s.urlExpiretime))return void Rn("Url Expired");if("undefined"!=typeof e3ds_data)if(null!=e3ds_data.configuration){var n=e3ds_data.configuration;console.log(" found e3ds_data.configuration:"+JSON.stringify(n));const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t],a=n[i];var o=s[i];s[i]=a,console.log("newValue --\x3e "+a),console.log("updateAppConfig --\x3e "+i+" , "+o+" , "+s[i])}}else console.log("not found e3ds_data.configuration");else console.log("not found updateAppConfig");"function"==typeof onConfigAcquire?onConfigAcquire():console.log("not found onConfigAcquire")}s.serverOwner=W,s.appName=H,s.hostMeetingId=U,s.GuestMeetingId=_,function(){var e=c;for(var[n,o]of e.entries())for(const[e,t]of Object.entries(s))if(e==n){o!=t&&("cmdLineArgs"!=e&&"exeLunchArgs"!=e||1==s.shouldAppendOveridingcmdLineArgs&&(console.log("cmdLineArgs/exeLunchArgs  urlParams:   "+o),console.log("cmdLineArgs/exeLunchArgs  configurationObj:   "+t),o=t+" "+o,console.log("cmdLineArgs/exeLunchArgs  new:   "+o)),1==s.shouldAppendOveridingcmdLineArgs&&(console.log("overiridng config value. Old value   "+n+" :"+o),console.log(`new value ${e}: ${t}`)),s[e]=o);break}if(null!=(a=G("isAdminDebugging"))&&(X=a),R(X),1==X){console.log("url: "+Xe),console.log("urlVersion: "+L),console.log("href_emulated: "+v),console.log("pathname: "+h),console.log("urlParams: ",c),console.log(" 1111111111111 isAdminDebugging > "+X),console.log(K),console.log("accessedTopLevelDomainName: "+Z),function(){for(var e=performance.getEntriesByType("navigation"),t=0;t<e.length;t++){var n=e[t];switch(console.log("Page loading type = "+n.type),n.type,n.type){case"navigate":console.log("Navigation started by clicking a link, entering the URL in the browser's address bar, form submission, or initializing through a script operation other than reload and back_forward as listed below.");break;case"reload":console.log(" Navigation is through the browser's reload operation or location.reload()");break;case"back_forward":console.log("Navigation is through the browser's history traversal operation");break;case"prerender":console.log(" Navigation is initiated by a prerender hint");break;default:console.log("p.type: unknown")}}}(),console.log("navigator.userAgent: "+navigator.userAgent),console.log("isIniFrame() : "+_e());var i=document.referrer;console.log("referrer:"+i),console.log("XXXXX configurationObj : "+JSON.stringify(s))}null!=(a=G("showbrowserMouse"))&&(Y=a),console.log(" 1111111111111 showbrowserMouse > "+Y),Zt.enabled=s.isAfkEnabled,Zt.warnTimeout=60*s.afkWarnTimeout,Zt.closeTimeout=60*s.afkCloseTimeout;var a,l=document.getElementById("screenshot-img");if(l&&(1==s.enableScreenshot?l.style.display="block":0==s.enableScreenshot&&(l.style.display="none")),Q=G("useVOIP"),console.log(" 1111111111111 useVOIP > "+Q),1==Q){var r=G("voipRoomName");""!=r&&null!=r&&(document.getElementById("room_number").value=W+":"+r),document.getElementById("voipControlPanel").style.display="flex",document.getElementById("e3ds_bottom_panelObj_left_bottom").style.display="block",navigator.permissions||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.e3ds_alert("IOS browsers might not support Eagle VoIP system",{timeout:5e3})}if(null!=(a=G("useExtendedTyping"))&&(j=a),console.log(" 1111111111111 useExtendedTyping > "+j),Y=G("showbrowserMouse"),ve(),null!=(a=G("isSpectator"))&&(q=a),null!=G("GuestMeetingId")&&(q=!0,X=!0),console.log(" 1111111111111 isSpectator > "+q),t=G("owner"),null!=(a=G("TurnServer"))&&(ue=a),console.log(" 1111111111111 TurnServerMode > "+ue),null!=(a=G("forceMeetingMode"))&&(V=a),2==V?q=!0:1==V&&(q=!1),console.log(" 1111111111111 forceMeetingMode > "+V),console.log(" 2222222 forceMeetingMode--\x3e isSpectator > "+q),he=G("MouseControlScheme"),console.log(" ***************1111111111111 MouseControlScheme:"+he),null!=he)switch(!0){case 0==he:bt.controlScheme=St.LockedMouse;break;case 1==he:bt.controlScheme=St.HoveringMouse;break;default:console.log(" ***************2222222222 nada:"+he)}if(console.log(" ***************1111111111111 inputOptions.controlScheme:"+bt.controlScheme),null!=(a=G("ShouldAutoPlay"))&&(me=a),"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),1==me||b.length>0?ge=!0:0==me&&(ge=!1),console.log(" 1111111111111 ShouldAutoPlay > "+me),console.log(" 1111111111111 flag4unMuteAudio4AutoPlay > "+ge),null!=(a=G("fakeMouseWithTouches"))&&(pe=a),console.log(" 1111111111111 fakeMouseWithTouches > "+pe),null!=(a=G("suppressBrowserKeys"))&&(fe=a),console.log(" 1111111111111 suppressBrowserKeys > "+fe),0==pe?bt.fakeMouseWithTouches=!1:1==pe&&(bt.fakeMouseWithTouches=!0),0==fe?bt.suppressBrowserKeys=!1:1==fe&&(bt.suppressBrowserKeys=!0),a=G("expireOn"),console.log(" 1111111111111 expireOn > "+ye),a.endsWith("minutes")){a=a.split("minutes")[0];var d=parseFloat(a);Number.isNaN(d)||(ye=60*d*1e3)}else d=parseFloat(a),Number.isNaN(d)||(ye=d);console.log(" 222222222 expireOn > "+ye),it()}(),Ln(),window.addEventListener("resize",Mn,!0),console.log("5555555555555555555  load()"),Mn(),function(){document.addEventListener&&(document.addEventListener("webkitfullscreenchange",ft,!1),document.addEventListener("mozfullscreenchange",ft,!1),document.addEventListener("fullscreenchange",ft,!1),document.addEventListener("MSFullscreenChange",ft,!1)),window.addEventListener("resize",on,!0),window.addEventListener("orientationchange",yn),console.log("5555555555555555555  load()"),window.addEventListener("message",Gt,!1),an(),null!==(be=document.getElementById("quality-control-ownership-tgl"))&&(be.onchange=function(e){qt()});let e=document.getElementById("overlayButton");null!==e&&(e.onclick=function(e){!function(){if(null!=U||1==V){let e=document.getElementById("hostSettings");"none"===e.style.display||""===e.style.display?e.style.display="block":e.style.display="none"}if(null!=_){let e=document.getElementById("GuestSettings");"none"===e.style.display||""===e.style.display?e.style.display="block":e.style.display="none"}if(1==G("showPsControl")){let e=document.getElementById("overlayPSSettings");"none"===e.style.display||""===e.style.display?e.style.display="block":"block"===e.style.display&&(e.style.display="none")}else document.getElementById("overlayPSSettings").style.display="none"}()});let t=document.getElementById("btnPasswordSubmit");null!==t&&(t.onclick=function(e){document.getElementById("PasswordToVerify").value==s.passwordToStart?(document.getElementById("popupForPasswordToStart").style.display="none",document.getElementById("videoPlayOverlay").style.display="block",document.getElementById("streamingVideo").style.display="block",Wn()):alert("Wrong password. Try Again")});let n=document.getElementById("btnPasswordCanecl");null!==n&&(n.onclick=function(e){window.location="/assets/pages/kickedOut.htm"});let o=document.getElementById("prioritise-quality-tgl"),i=document.getElementById("quality-params-submit");null!==o&&(o.onchange=function(e){if(o.checked){let e={PrioritiseQuality:1,LowBitrate:document.getElementById("low-bitrate-text").value,HighBitrate:document.getElementById("high-bitrate-text").value,MinFPS:document.getElementById("min-fps-text").value};$t(e),console.log(e),i.onclick=function(e){let t={PrioritiseQuality:1,LowBitrate:document.getElementById("low-bitrate-text").value,HighBitrate:document.getElementById("high-bitrate-text").value,MinFPS:document.getElementById("min-fps-text").value};$t(t),console.log(t)}}else{let e={PrioritiseQuality:0};$t(e),console.log(e),i.onclick=null}});let a=document.getElementById("show-fps-button");null!==a&&(a.onclick=function(e){zt({Console:"stat fps"})});let l=document.getElementById("btn-Toggle-voipSpeaker-list");null!==l&&(l.onclick=function(e){"none"!=document.getElementById("roster").style.display?(document.getElementById("roster").style.display="none",l.src="assets/images/voipListNO.png"):(document.getElementById("flow-meeting").style.display="block",document.getElementById("roster").style.display="block",l.src="assets/images/voipListYes.png")});let r=document.getElementById("match-viewport-res-tgl");null!==r&&(r.onchange=function(e){r.checked});let c=document.getElementById("show-stats-tgl");null!==c&&(c.onchange=function(e){document.getElementById("statsContainer").style.display=e.target.checked?"block":"none"});var d=document.getElementById("kickAllGuests");d&&(d.onclick=function(e){console.log("-> SS: kickAllGuests"),Se.send(JSON.stringify({type:"kickAllGuests"}))});var u=document.getElementById("KickSelctedGuest");u&&(u.onclick=function(e){console.log("-> SS: KickSelctedGuest");var t=document.getElementById("Guest-filter"),n=t.options[t.selectedIndex].value;t.options[t.selectedIndex].text,Se.send(JSON.stringify({type:"KickSelctedGuest",playerIDToKick:n}))});var g=document.getElementById("DisableControlFromOthers");g&&(g.onclick=function(e){console.log("-> SS: DisableControlFromOthers"),Se.send(JSON.stringify({type:"DisableControlFromOthers"}))});var m=document.getElementById("GiveControlToThisGuest");m&&(m.onclick=function(e){console.log("-> SS: GiveControlToThisGuest");var t=document.getElementById("Guest-filter"),n=t.options[t.selectedIndex].value;t.options[t.selectedIndex].text,Se.send(JSON.stringify({type:"GiveControlToThisGuest",GiveControlToThisGuestID:n}))});let p=document.getElementById("BandwidthCap_params_submit");p&&(p.onclick=function(e){mt(document.getElementById("BandwidthCap_text").value)});let f=document.getElementById("FramerateCap_params_submit");f&&(f.onclick=function(e){pt(document.getElementById("FramerateCap_text").value)});let y=document.getElementById("ApplyBtn4setFramerateCap");y&&(y.onclick=function(e){pt(document.getElementById("setFramerateCap").value)});var h=document.getElementById("settings-button");h&&(h.onclick=function(e){if(console.log("-> SS: settingsButton"),1!=G("isE3DSEngineApp"))return console.warn("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+Lt),void w("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+Lt+(Math.random()*(.12-.02)+.02).toFixed(4),{timeout:2e3,color:"blue"});!function(){let e=document.getElementById("minBitrate").value,t=document.getElementById("maxBitrate").value,n=document.getElementById("resolution").value,o=(document.getElementById("minQP").value,document.getElementById("rateCtrl").value),i=(document.getElementById("minFPS").value,document.getElementById("backbuffersize").value,document.getElementById("quality").value);var a=JSON.stringify({type:"settings",data:{quality:i,minBitrate:e,maxBitrate:t,resolution:n,rateCtrl:o}});console.log("settingsButton--\x3e "+a),Se.send(a)}()});var v=document.getElementById("ApplyMaxSettingsBtn");v&&(v.onclick=function(e){if(console.log("-> SS: ApplyMaxSettingsBtn"),1!=G("isE3DSEngineApp"))return console.warn("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+Lt),void w("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+Lt,{timeout:2e3,color:"blue"});var t=JSON.stringify({type:"settings",data:{minBitrate:2e7,maxBitrate:5e7,resolution:"1920x1080",minQP:1,rateCtrl:"CBR",minFPS:60,backbuffersize:1}});console.log("ApplyMaxSettingsBtn -> SS: "+t),Se.send(t)});var S=document.getElementById("ApplyMidSettingsBtn");S&&(S.onclick=function(e){if(console.log("-> SS: ApplyMidSettingsBtn"),1!=G("isE3DSEngineApp"))return console.error("Engine version below 4.26. so skipping ApplyMidSettingsBtn VideoEncoderQP -> : "+Lt),void w("Engine version below 4.26. so skipping ApplyMidSettingsBtn VideoEncoderQP -> : "+Lt);var t=JSON.stringify({type:"settings",data:{minBitrate:1e7,maxBitrate:25e6,resolution:"1280x720",minQP:30,rateCtrl:"VBR",minFPS:60,backbuffersize:1}});console.log("ApplyMidSettingsBtn -> SS: "+t),Se.send(t)});var b=document.getElementById("ApplyMinSettingsBtn");b&&(b.onclick=function(e){if(console.log("-> SS: ApplyMinSettingsBtn"),1!=G("isE3DSEngineApp"))return console.warn("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+Lt),void w("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+Lt,{timeout:2e3,color:"blue"});var t=JSON.stringify({type:"settings",data:{minBitrate:4e6,maxBitrate:2e7,resolution:"800x640",minQP:50,rateCtrl:"VBR",minFPS:60,backbuffersize:1}});console.log("ApplyMinSettingsBtn -> SS: "+t),Se.send(t)});let E=document.getElementById("ApplyBtn4setBandwidthCap");E&&(E.onclick=function(e){mt(document.getElementById("setBandwidthCap").value)});let B=document.getElementById("ApplyBtn4Resulation");B&&(B.onclick=function(e){Vt(document.getElementById("ResulationX").value,document.getElementById("ResulationY").value)});let T=document.getElementById("ApplyBtn4Resulation_r");T&&(T.onclick=function(e){!function(e,t){let n={Console:"r.setres "+document.getElementById("ResulationX_r").value+"x"+document.getElementById("ResulationY_r").value+"w"};zt(n),1==G("isAdminDebugging")&&console.log(n)}()});let I=document.getElementById("AudioBtn");if(I&&(I.onclick=function(){nt()}),muteaudio=document.getElementById("muteaudio"),null!==muteaudio&&(muteaudio.onchange=function(e){xe&&Se.send(JSON.stringify({type:"settings",mute:muteaudio.checked}))}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){let e=document.getElementById("fullscreen-img");e&&(e.style.display="none")}let k=document.getElementById("fullscreen-img");k&&(k.onclick=function(){yt()});let C=document.getElementById("screenshot-img");C&&(C.onclick=function(){wt()}),vt("button_720p",1280,720),vt("button_1080p",1920,1080),vt("button_1440p",2560,1440),vt("button_4K",3840,2160),vt("button_8K",7680,4320);let x=document.getElementById("match-viewport-res-tgl");null!==x&&x.checked;let M=document.getElementById("ApplyBtn4setHighBitrate");M&&(M.onclick=function(e){let t=document.getElementById("setHighBitrate").value;capBpsCmd="Encoder.HighBitrate "+t;let n={Console:capBpsCmd};zt(n),console.log(n)});let D=document.getElementById("ApplyBtn4setMaxBitrate");D&&(D.onclick=function(e){let t=document.getElementById("setMaxBitrate").value;capBpsCmd="Encoder.MaxBitrate "+t;let n={Console:capBpsCmd};zt(n),console.log(n)});let P=document.getElementById("Volumebar");P&&(P.onchange=function(e){!function(e){console.log("setVolume val: "+e);var t=document.getElementById("streamingVideo");t.volume=e,console.log("streamingVideo.volume: "+t.volume),ce||(ce=document.getElementById("Audio")),ce.volume=e,console.log("audioElem.volume: "+ce.volume)}(this.value)});let O=document.getElementById("ApplyBtn4setUseBackBufferSize");O&&(O.onclick=function(e){let t=document.getElementById("setUseBackBufferSize").value;capBpsCmd="Encoder.UseBackBufferSize "+t;let n={Console:capBpsCmd};zt(n),console.log(n)});let A=document.getElementById("ApplyBtn4setPrioritiseQuality");A&&(A.onclick=function(e){let t=document.getElementById("setPrioritiseQuality").value;capBpsCmd="Encoder.PrioritiseQuality "+t;let n={Console:capBpsCmd};zt(n),console.log(n)});let R=document.getElementById("ApplyBtn4setMinFPS");R&&(R.onclick=function(e){let t=document.getElementById("setMinFPS").value;capBpsCmd="Encoder.MinFPS "+t;let n={Console:capBpsCmd};zt(n),console.log(n)});let L=document.getElementById("ApplyBtn4setMinQP");L&&(L.onclick=function(e){let t=document.getElementById("setMinQP").value;capBpsCmd="Encoder.MinQP "+t;let n={Console:capBpsCmd};zt(n),console.log(n)});let N=document.getElementById("ApplyBtn4setLowBitrate");N&&(N.onclick=function(e){let t=document.getElementById("setLowBitrate").value;capBpsCmd="Encoder.LowBitrate "+t;let n={Console:capBpsCmd};zt(n),console.log(n)});let F=document.getElementById("ApplyBtn4TargetSize");F&&(F.onclick=function(e){let t=document.getElementById("TargetSizeX").value,n=document.getElementById("TargetSizeY").value;capBpsCmd="Encoder.TargetSize "+t+"x"+n;let o={Console:capBpsCmd};zt(o),console.log(o)});let W=document.getElementById("ApplyBtn4setRateControl");W&&(W.onclick=function(e){var t=document.getElementById("RateControlMethod"),n=t.options[t.selectedIndex].value;t.options[t.selectedIndex].text,capBpsCmd="Encoder.RateControl "+n;let o={Console:capBpsCmd};zt(o),console.log(o)});let H=document.getElementById("encoder-params-submit");null!==H&&(H.onclick=function(e){let t=document.getElementById("encoder-rate-control").value,n=1e3*document.getElementById("encoder-target-bitrate-text").value,o=1e3*document.getElementById("encoder-max-bitrate-text").value,i=document.getElementById("encoder-min-qp-text").value,a=document.getElementById("encoder-max-qp-text").value,s=document.getElementById("encoder-filler-data-tgl").checked?1:0,l=document.getElementById("encoder-multipass").value;zt({Console:"PixelStreaming.Encoder.RateControl "+t}),zt({Console:"PixelStreaming.Encoder.TargetBitrate "+(n>0?n:-1)}),zt({Console:"PixelStreaming.Encoder.MaxBitrateVBR "+(o>0?o:-1)}),zt({Console:"PixelStreaming.Encoder.MinQP "+i}),zt({Console:"PixelStreaming.Encoder.MaxQP "+a}),zt({Console:"PixelStreaming.Encoder.EnableFillerData "+s}),zt({Console:"PixelStreaming.Encoder.Multipass "+l})});let J=document.getElementById("webrtc-params-submit");null!==J&&(J.onclick=function(e){let t=document.getElementById("webrtc-degradation-pref").value,n=document.getElementById("webrtc-max-fps-text").value,o=1e3*document.getElementById("webrtc-min-bitrate-text").value,i=1e3*document.getElementById("webrtc-max-bitrate-text").value,a=document.getElementById("webrtc-low-qp-text").value,s=document.getElementById("webrtc-high-qp-text").value;zt({Console:"PixelStreaming.WebRTC.DegradationPreference "+t}),zt({Console:"PixelStreaming.WebRTC.MaxFps "+n}),zt({Console:"PixelStreaming.WebRTC.MinBitrate "+o}),zt({Console:"PixelStreaming.WebRTC.MaxBitrate "+i}),zt({Console:"PixelStreaming.WebRTC.LowQpThreshold "+a}),zt({Console:"PixelStreaming.WebRTC.HighQpThreshold "+s})}),"function"==typeof onHtmlBind?onHtmlBind():console.log("not found onHtmlBind")}(),null!=s.passwordToStart&&"undefined"!=s.passwordToStart&&""!=s.passwordToStart?(console.log("streamingVideo: ",document.getElementById("streamingVideo").style.display),console.log("videoPlayOverlay: ",document.getElementById("videoPlayOverlay").style.display),document.getElementById("videoPlayOverlay").style.display="none",document.getElementById("streamingVideo").style.display="none",Un&&(Un.style.display="block")):(Un&&(Un.style.display="none"),Wn()),console.log("configurationObj for v5/v4/v6: "+JSON.stringify(s,null,"\t"))}function Wn(){!function(){if(console.log("videoToPlay: "+b),b.length>0){var e=document.getElementById("streamingVideo");if(e){w("Click in the video to enable audio",{color:"blue",timeout:1e4}),e.addEventListener("ended",(e=>{console.log("Video stopped either because 1) it was over, or 2) no further data is available."),function(){if(1==G("DoRandomSuffleInLoadingVideoAssets")){var e=(t=b.length,Math.floor(Math.random()*(t-0))+0);Pn(An=e)}else++An==b.length?Pn(An=0):Pn(An);var t}()})),Pn(0);var t=document.getElementById("e3ds_bottom_panelObj");t&&(t.style.display="block")}}}(),Dn()}function Hn(){S(JSON.stringify({type:"getAppCOnfig",appName:H,owner:W,ConfigName:J,urlVersion:L}),Bn)}var Jn=void 0;function qn(){Fn()}function Vn(){"use strict";if(T){if(!ae){var e=document.getElementById("InQueue_Text");if(e&&(e.innerHTML="Requesting Available Slot"),window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket){var t=v.replace("http://","ws://").replace("https://","wss://");(Bn=new WebSocket(t)).onerror=function(e){console.error(`ws4queue error: ${JSON.stringify(e)}`)},Bn.onclose=function(e){console.warn(`ws4queue closed: ${JSON.stringify(e.code)} - ${e.reason}`),ne&&!E&&(In+=1,console.log("ws4queueReconnec() reconnectAttempt:"+In),Bn=void 0,setTimeout(qn(),4e3))},Bn.onopen=function(e){"v5"==L||"v6"==L?Hn():_n()},Bn.onmessage=function(e){var t=JSON.parse(e.data);if("disconnectAndretryIn"===t.type){var n=document.getElementById("InQueue_Text");n&&(n.innerHTML="CCU Limit Reached. Traying Again in 10 sec"),ae=!1,ne=!1,Bn.close(),clearInterval(Tn),Tn=setInterval((function(){Bn.readyState!=WebSocket.CONNECTING&&(clearInterval(Tn),qn())}),1e4)}else if("ShowThisHtmlPage"===t.type)ae=!0,Bn.close(),self.location=t.htmlPage;else if("AppCOnfig"===t.type)_n(t);else if("TakeuserDeviceInfo"===t.type)ke=t.userDeviceInfo,console.log(`userDeviceInfo : ${JSON.stringify(ke)}`),console.log(" 1111111111111 useExtendedTyping > "+j);else if("sendIdentity"===t.type)Dn();else if("doApprequest"===t.type)if(null!=_){var o={type:"RequestToJoinMeeting",appName:G("appName"),owner:s.owner,clientInfo:ee,GuestMeetingId:G("GuestMeetingId"),accessedTopLevelDomainName:Z,url_searchParams:String(c),userDeviceInfo:ke,configurationStr:Xe[2]},i=JSON.stringify(o);console.log("--------------- ws4queue.send Json: "+i),Bn.send(i)}else $n();else"ConnectPlayerTo"===t.type?(E=!0,ze({type:"stage2_deQueued"}),console.log("222222 <- SS: msg: "+JSON.stringify(t)),kn=!1,T=!1,Bn&&Bn.close(),console.log("extractValueFromUrl('videoToPlay') :"+b),b.length<=0&&bn(1),Wt(Jn=t.cirrusServer)):"redirectTo11"===t.type?(ze({type:"stage2_deQueued"}),console.log("222222 <- SS: msg.data.url: "+t.url),console.log("222222 <- SS: msg: "+JSON.stringify(t)),Wt(t.cirrusServer)):"UpdatePlayerWatingRank"===t.type?(console.log("1111111111111111111111 <- SS: UpdatePlayerWatingRank: "+t.Postion),b.length<=0&&function(e,t,n){var o=document.getElementById("queueNumberText"),i="",a=document.getElementById("InQueue_Text");a&&(a.innerHTML="In Queue"),o&&(o.innerHTML=t,console.log("queueNumberText.innerHTM : "+i)),ze({type:"QueueNumberUpdated",queuePosition:t})}(0,t.Postion)):"ShowAnimatedInfo"===t.type?gn(t.data.info):"showTextOverlay"===t.type?(console.log("showTextOverlay: "+t.data.info),w(t.data.info,{color:"blue"})):"printInConsoleOnly"===t.type?1==G("isAdminDebugging")&&console.log("printInConsoleOnly: "+t.data.info):"ShowInfoInLines"===t.type&&(w(t.data.info,{color:"blue"}),console.log("ShowInfoInLines: "+t.data.info))}}else alert("Your browser doesn't support WebSocket")}}else console.log("connectToQueue() returninig bcz shouldTryToReconnectQueue: "+T)}function st(){if(lt){if(se)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),se=!1;else{let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),screen.orientation.lock("landscape"),se=!0}clearInterval(Te),clearTimeout(Ie),lt=!1}}function $n(){if(null==ee)return console.log("trying to doApprequest but clientInfo undefined"),void jn();console.log("doing doApprequest");var e=void 0;if(null!=s)e={type:"appRequest",clientInfo:ee,accessedTopLevelDomainName:Z,url_searchParams:String(c),configurationStr:Xe[2],userDeviceInfo:ke,configuration:s,expireOn:s.expireOn,MouseControlScheme:s.MouseControlScheme,MouseControlScheme:s.MouseControlScheme,MouseControlScheme:s.MouseControlScheme,MouseControlScheme:s.MouseControlScheme,showPsControl:s.showPsControl,afkWarnTimeout:s.afkWarnTimeout,afkCloseTimeout:s.afkCloseTimeout,isAfkEnabled:s.isAfkEnabled,enableScreenshot:s.enableScreenshot,useExtendedTyping:s.useExtendedTyping,showbrowserMouse:s.showbrowserMouse,isAdminDebugging:s.isAdminDebugging,appName:s.appName,owner:s.owner,cmdLineArgs:s.exeLunchArgs,exeLunchArgs:s.exeLunchArgs,hostMeetingId:s.hostMeetingId,GuestMeetingId:s.GuestMeetingId,maxUserLimit:s.maxUserLimit,custom_html:s.custom_html};else{var t=v.replace(location.origin+"/","").replace(location.search,"");e={type:"appRequest",appName:G("appName"),owner:t,clientInfo:ee,cmdLineArgs:G("cmdLineArgs"),hostMeetingId:G("hostMeetingId"),GuestMeetingId:G("GuestMeetingId"),custom_html:G("custom_html"),onDemand:G("onDemand"),onDemandRegion:G("onDemandRegion"),maxUserLimit:G("maxUserLimit"),accessedTopLevelDomainName:Z,url_searchParams:String(c)}}var n=JSON.stringify(e);console.log("--------------- ws4queue.send Json: "+n),Bn.send(n)}function Xn(e){null==e.latitude&&(e.latitude="38.88",console.warn("latitude undefined .so setting latitude : "+e.latitude)),null==e.longitude&&(e.longitude="-120.88",console.warn("longitude undefined .so setting longitude : "+e.longitude)),ee={ip:e.ip,city:e.city,region:e.region_name,country_name:e.country,latitude:e.latitude,longitude:e.longitude,fullInfo:e},Ln();var t=e.city+"_"+(3333,Math.floor(3333*Math.random()));document.getElementById("voipUserName")&&(document.getElementById("voipUserName").value=t),1==Q&&document.getElementById("create_room").click(),console.log("222  clientInfo: "+JSON.stringify(ee)),$n()}lt=!1,Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)};var zn=void 0,Gn=0;function jn(){if(Gn++,console.log("--\x3e getInfoattempt: "+Gn),null==ee){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(console.log(e.readyState),console.log(e.status),console.log("getInfo()  xmlHttp.responseText: "+e.responseText),429==e.status)return null!=zn&&clearTimeout(zn),void(zn=setTimeout(jn,2e3));var t;422!=e.status?""!=e.responseText&&null!=e.responseText&&200==e.status?(clearTimeout(zn),t=e.responseText,null==ee?(console.log("11111111111111111111111 responseText :    "+t),Xn(JSON.parse(t))):console.log("getInfo()callback(responseText)   clientInfo !=undefined. so returnining")):null!=zn&&clearTimeout(zn):Xn({ip:"ahsanHackOnUnabletoGetIpInfo",city:"ahsanHackOnUnabletoGetIpInfo",region:"ahsanHackOnUnabletoGetIpInfo",country_name:"ahsanHackOnUnabletoGetIpInfo",latitude:void 0,longitude:void 0})},e.open("POST","https://ssrelay-api.eaglepixelstreaming.com/api/v1/ipgeolocation",!0);try{e.send(null)}catch(e){console.log("XXXXXXXXXXXXXXXXXXX getInfo try catch error : "),console.log(e)}}else console.log("getInfo() clientInfo !=undefined. so returnining")}$(document).ready((function(){$(".slider-toggler").click((function(){$(".slider-content").animate({width:"toggle"}),$(".toggle-img-collapsed").toggle(),$(".toggle-img-expanded").toggle()})),$(".slider-toggler").click()}))})();